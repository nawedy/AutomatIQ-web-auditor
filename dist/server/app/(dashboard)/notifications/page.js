(()=>{var e={};e.id=317,e.ids=[317],e.modules={3203:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/drgn003/AutomatIQ/AI-website-auditor/components/ui/separator.tsx","Separator")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22023:(e,t,s)=>{"use strict";s.d(t,{NotificationsList:()=>N});var a=s(60687),r=s(43210),i=s(16189),n=s(70333),o=s(24934),d=s(85910),l=s(5336),c=s(35071),u=s(97051),m=s(25334),p=s(50941),h=s(55192),x=s(59821),f=s(96241);function v({notification:e,onMarkAsRead:t,onDelete:s}){let[d,v]=(0,r.useState)(!1),j=(0,i.useRouter)(),{toast:g}=(0,n.dj)(),N=(0,p.m)(new Date(e.createdAt),{addSuffix:!0});return(0,a.jsxs)(h.Zp,{className:(0,f.cn)("w-full transition-all duration-300",e.read?"":"border-primary/50 bg-primary/5"),children:[(0,a.jsxs)(h.aR,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-primary"}),(0,a.jsx)(h.ZB,{className:"text-base",children:e.title}),!e.read&&(0,a.jsx)("span",{className:"h-2 w-2 rounded-full bg-primary"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{if(!e.data?.status)return null;switch(e.data.status.toLowerCase()){case"completed":return(0,a.jsxs)(x.E,{variant:"success",className:"flex items-center gap-1",children:[(0,a.jsx)(l.A,{className:"h-3 w-3"}),"Completed"]});case"failed":return(0,a.jsxs)(x.E,{variant:"destructive",className:"flex items-center gap-1",children:[(0,a.jsx)(c.A,{className:"h-3 w-3"}),"Failed"]});default:return(0,a.jsx)(x.E,{variant:"outline",children:e.data.status})}})(),(()=>{if(e.data?.score===void 0)return null;let t=e.data.score,s="default";return s=t>=90?"success":t>=70?"warning":"destructive",(0,a.jsxs)(x.E,{variant:s,className:"ml-2",children:["Score: ",t]})})()]})]}),(0,a.jsxs)(h.BT,{className:"text-xs",children:[N," â€¢ ",e.data?.websiteName||"Unknown website"]})]}),(0,a.jsx)(h.Wu,{className:"pb-2",children:(0,a.jsx)("p",{className:"text-sm",children:e.message})}),(0,a.jsxs)(h.wL,{className:"flex justify-between pt-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[!e.read&&(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>{v(!0),t(e.id),v(!1)},disabled:d,children:"Mark as read"}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>{v(!0),s(e.id),v(!1)},disabled:d,children:"Delete"})]}),e.data?.auditId&&(0,a.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{e.data?.auditId?(j.push(`/audits/${e.data.auditId}`),e.read||t(e.id)):g({title:"Error",description:"Audit details not available",variant:"destructive"})},className:"flex items-center gap-1",children:["View Audit",(0,a.jsx)(m.A,{className:"h-3 w-3"})]})]})]})}var j=s(41862);let g=(0,s(62688).A)("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function N(){let[e,t]=(0,r.useState)(!0),[s,c]=(0,r.useState)([]),[m,p]=(0,r.useState)("all"),h=(0,i.useRouter)(),{toast:x}=(0,n.dj)(),f=async e=>{try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,read:!0})})).ok)throw Error("Failed to mark notification as read");c(s.map(t=>t.id===e?{...t,read:!0}:t)),h.refresh()}catch(e){x({title:"Error",description:e.message,variant:"destructive"})}},N=async e=>{try{if(!(await fetch("/api/notifications",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok)throw Error("Failed to delete notification");c(s.filter(t=>t.id!==e)),h.refresh()}catch(e){x({title:"Error",description:e.message,variant:"destructive"})}},b=async()=>{try{let e=s.filter(e=>!e.read).map(e=>e.id);if(0===e.length)return;if(!(await fetch("/api/notifications/mark-all-read",{method:"POST"})).ok)throw Error("Failed to mark all notifications as read");c(s.map(e=>({...e,read:!0}))),h.refresh(),x({title:"Success",description:"All notifications marked as read"})}catch(e){x({title:"Error",description:e.message,variant:"destructive"})}},y=s.filter(e=>"unread"!==m||!e.read),A=s.filter(e=>!e.read).length;return(0,a.jsxs)("div",{className:"w-full max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Notifications"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:A>0&&(0,a.jsxs)(o.$,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-1",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),"Mark all as read"]})})]}),(0,a.jsxs)(d.Tabs,{defaultValue:"all",value:m,onValueChange:e=>p(e),className:"w-full",children:[(0,a.jsxs)(d.TabsList,{className:"grid w-full grid-cols-2 mb-4",children:[(0,a.jsxs)(d.TabsTrigger,{value:"all",className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),"All"]}),(0,a.jsxs)(d.TabsTrigger,{value:"unread",className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),A>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-primary"})]}),"Unread",A>0&&` (${A})`]})]}),(0,a.jsx)(d.TabsContent,{value:"all",className:"mt-0",children:e?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)(j.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(g,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/30"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"No notifications"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You don't have any notifications yet"})]}):(0,a.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(v,{notification:e,onMarkAsRead:f,onDelete:N})},e.id))})}),(0,a.jsx)(d.TabsContent,{value:"unread",className:"mt-0",children:e?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)(j.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===y.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/30"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"All caught up!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You've read all your notifications"})]}):(0,a.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(v,{notification:e,onMarkAsRead:f,onDelete:N})},e.id))})})]})]})}},25334:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35071:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},41862:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},43338:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>n});var a=s(37413),r=s(99203),i=s(3203);let n={title:"Notifications | AutomatIQ",description:"View and manage your notifications"};function o(){return(0,a.jsxs)("div",{className:"container py-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Notifications"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"View and manage your notifications for scheduled audits and other events"})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsx)(r.NotificationsList,{})]})}},60038:(e,t,s)=>{Promise.resolve().then(s.bind(s,99203)),Promise.resolve().then(s.bind(s,3203))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70333:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(43210);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=a.useState(l);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},77954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var a=s(65239),r=s(48088),i=s(88170),n=s.n(i),o=s(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l={children:["",{children:["(dashboard)",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,43338)),"/Users/drgn003/AutomatIQ/AI-website-auditor/app/(dashboard)/notifications/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,84914)),"/Users/drgn003/AutomatIQ/AI-website-auditor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/drgn003/AutomatIQ/AI-website-auditor/app/(dashboard)/notifications/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(dashboard)/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},78190:(e,t,s)=>{Promise.resolve().then(s.bind(s,22023)),Promise.resolve().then(s.bind(s,78377))},99203:(e,t,s)=>{"use strict";s.d(t,{NotificationsList:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call NotificationsList() from the server but NotificationsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/drgn003/AutomatIQ/AI-website-auditor/components/notifications/notifications-list.tsx","NotificationsList")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4243,4362,1372],()=>s(77954));module.exports=a})();