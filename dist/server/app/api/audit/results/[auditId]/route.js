"use strict";(()=>{var e={};e.id=5761,e.ids=[5761],e.modules={2321:e=>{e.exports=require("@axe-core/puppeteer")},2850:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{DELETE:()=>p,GET:()=>i,POST:()=>n,PUT:()=>d});var o=r(32190),a=r(59130),u=e([a]);let l=new(a=(u.then?(await u)():u)[0]).d;async function i(e,{params:t}){try{let{auditId:r}=t;if(!r)return o.NextResponse.json({error:"Audit ID is required"},{status:400});if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r))return o.NextResponse.json({error:"Invalid audit ID format"},{status:400});let s=await l.getAuditResults(r);if(!s){let e=await l.getAuditProgress(r);if(e)if("completed"===e.status)return o.NextResponse.json({error:"Audit completed but results not found"},{status:500});else if("failed"===e.status)return o.NextResponse.json({error:"Audit failed",progress:{id:e.id,status:e.status,currentStep:e.currentStep}},{status:422});else return o.NextResponse.json({error:"Audit still in progress",progress:{id:e.id,status:e.status,currentStep:e.currentStep,progress:e.progress}},{status:202});return o.NextResponse.json({error:"Audit not found"},{status:404})}let{searchParams:a}=new URL(e.url),u="true"===a.get("includeRawData"),i=a.get("modules")?.split(",")||[],n={...s};if(!u&&n.rawData&&delete n.rawData,i.length>0){let e=["seo","performance","accessibility","security","mobile","content"],t=i.filter(t=>e.includes(t));if(t.length>0){let r={};for(let e of t)n[e]&&(r[e]=n[e]);for(let s of(n={...n,...r},e))!t.includes(s)&&n[s]&&delete n[s]}}return o.NextResponse.json({success:!0,results:n})}catch(e){return console.error("API Error - Get Audit Results:",e),o.NextResponse.json({error:"Failed to get audit results",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function n(){return o.NextResponse.json({error:"Method not allowed. Use GET to retrieve audit results.",usage:{method:"GET",path:"/api/audit/results/{auditId}",queryParams:{includeRawData:"boolean - Include raw audit data (default: false)",modules:"string - Comma-separated list of modules to include (seo,performance,accessibility,security,mobile,content)"},description:"Get the complete results of a completed audit"}},{status:405})}async function d(){return o.NextResponse.json({error:"Method not allowed. Use GET to retrieve audit results.",usage:{method:"GET",path:"/api/audit/results/{auditId}",description:"Get the complete results of a completed audit"}},{status:405})}async function p(){return o.NextResponse.json({error:"Method not allowed. Use GET to retrieve audit results.",usage:{method:"GET",path:"/api/audit/results/{auditId}",description:"Get the complete results of a completed audit"}},{status:405})}s()}catch(e){s(e)}})},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22316:e=>{e.exports=require("lighthouse")},24272:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{patchFetch:()=>d,routeModule:()=>p,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>c});var o=r(96559),a=r(48088),u=r(37719),i=r(2850),n=e([i]);i=(n.then?(await n)():n)[0];let p=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/audit/results/[auditId]/route",pathname:"/api/audit/results/[auditId]",filename:"route",bundlePath:"app/api/audit/results/[auditId]/route"},resolvedPagePath:"/Users/drgn003/AutomatIQ/AI-website-auditor/app/api/audit/results/[auditId]/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:l,workUnitAsyncStorage:c,serverHooks:f}=p;function d(){return(0,u.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:c})}s()}catch(e){s(e)}})},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},56037:e=>{e.exports=require("mongoose")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79748:e=>{e.exports=require("fs/promises")},83636:e=>{e.exports=import("puppeteer")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,580,1852,6467,9130],()=>r(24272));module.exports=s})();