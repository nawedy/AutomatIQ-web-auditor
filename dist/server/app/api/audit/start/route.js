(()=>{var e={};e.id=813,e.ids=[813],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19636:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>b,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>f});var o={};r.r(o),r.d(o,{GET:()=>d,POST:()=>c});var n=r(96559),s=r(48088),a=r(37719),i=r(32190),u=r(23870),l=r(68043);async function c(e){try{let{url:t,options:r,userId:o}=await e.json();if(!t)return i.NextResponse.json({error:"URL is required"},{status:400});if(!r)return i.NextResponse.json({error:"Audit options are required"},{status:400});try{new URL(t)}catch{return i.NextResponse.json({error:"Invalid URL format"},{status:400})}let n=["seo","performance","accessibility","security","mobile","content"];if(!Object.keys(r).some(e=>n.includes(e)))return i.NextResponse.json({error:"At least one audit option must be selected"},{status:400});for(let[e,t]of Object.entries(r))if("boolean"!=typeof t)return i.NextResponse.json({error:`Option '${e}' must be a boolean value`},{status:400});await (0,l.Ay)();let s=(0,u.A)();return console.log(`🚀 Starting audit ${s} for ${t}`),i.NextResponse.json({success:!0,auditId:s,message:"Audit started successfully",url:t,options:r,status:"pending",estimatedDuration:"2-3 minutes"})}catch(e){return console.error("API Error - Start Audit:",e),i.NextResponse.json({error:"Failed to start audit",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function d(){return i.NextResponse.json({error:"Method not allowed. Use POST to start an audit.",usage:{method:"POST",body:{url:"string (required) - The URL to audit",options:{seo:"boolean - Enable SEO analysis",performance:"boolean - Enable performance analysis",accessibility:"boolean - Enable accessibility analysis",security:"boolean - Enable security analysis",mobile:"boolean - Enable mobile UX analysis",content:"boolean - Enable content analysis"},userId:"string (optional) - User ID for tracking"}}},{status:405})}let p=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/audit/start/route",pathname:"/api/audit/start",filename:"route",bundlePath:"app/api/audit/start/route"},resolvedPagePath:"/Users/drgn003/AutomatIQ/AI-website-auditor/app/api/audit/start/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:f,serverHooks:b}=p;function g(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:f})}},23870:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(55511);let n={randomUUID:o.randomUUID},s=new Uint8Array(256),a=s.length,i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let u=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();let u=(e=e||{}).random??e.rng?.()??(a>s.length-16&&((0,o.randomFillSync)(s),a=0),s.slice(a,a+=16));if(u.length<16)throw Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=u[e];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(u)}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68043:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i});var o=r(56037),n=r.n(o);let s=process.env.MONGODB_URI||"mongodb://localhost:27017/automatiq-auditor";if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose;a||(a=global.mongoose={conn:null,promise:null});let i=async function(){if(a.conn)return a.conn;a.promise||(a.promise=n().connect(s,{bufferCommands:!1,maxPoolSize:10,serverSelectionTimeoutMS:5e3,socketTimeoutMS:45e3,family:4}).then(e=>(console.log("✅ Connected to MongoDB"),e)).catch(e=>{throw console.error("❌ MongoDB connection error:",e),e}));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[4243,580],()=>r(19636));module.exports=o})();