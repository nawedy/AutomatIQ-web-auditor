"use strict";(()=>{var e={};e.id=3675,e.ids=[3675],e.modules={2321:e=>{e.exports=require("@axe-core/puppeteer")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{e.exports=require("bcrypt")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},12412:e=>{e.exports=require("assert")},13581:(e,t)=>{t.A=function(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},16467:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(96330);function n(e){return{createUser:({id:t,...r})=>e.user.create(a(r)),getUser:t=>e.user.findUnique({where:{id:t}}),getUserByEmail:t=>e.user.findUnique({where:{email:t}}),async getUserByAccount(t){let r=await e.account.findUnique({where:{provider_providerAccountId:t},include:{user:!0}});return r?.user??null},updateUser:({id:t,...r})=>e.user.update({where:{id:t},...a(r)}),deleteUser:t=>e.user.delete({where:{id:t}}),linkAccount:t=>e.account.create({data:t}),unlinkAccount:t=>e.account.delete({where:{provider_providerAccountId:t}}),async getSessionAndUser(t){let r=await e.session.findUnique({where:{sessionToken:t},include:{user:!0}});if(!r)return null;let{user:i,...n}=r;return{user:i,session:n}},createSession:t=>e.session.create(a(t)),updateSession:t=>e.session.update({where:{sessionToken:t.sessionToken},...a(t)}),deleteSession:t=>e.session.delete({where:{sessionToken:t}}),async createVerificationToken(t){let r=await e.verificationToken.create(a(t));return"id"in r&&r.id&&delete r.id,r},async useVerificationToken(t){try{let r=await e.verificationToken.delete({where:{identifier_token:t}});return"id"in r&&r.id&&delete r.id,r}catch(e){if(e instanceof i.Prisma.PrismaClientKnownRequestError&&"P2025"===e.code)return null;throw e}},getAccount:async(t,r)=>e.account.findFirst({where:{providerAccountId:t,provider:r}}),createAuthenticator:async t=>e.authenticator.create(a(t)),getAuthenticator:async t=>e.authenticator.findUnique({where:{credentialID:t}}),listAuthenticatorsByUserId:async t=>e.authenticator.findMany({where:{userId:t}}),updateAuthenticatorCounter:async(t,r)=>e.authenticator.update({where:{credentialID:t},data:{counter:r}})}}function a(e){let t={};for(let r in e)void 0!==e[r]&&(t[r]=e[r]);return{data:t}}},22316:e=>{e.exports=require("lighthouse")},28132:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{GET:()=>c});var n=r(32190),a=r(7462),s=r(43254),o=r(81111),u=e([o]);o=(u.then?(await u)():u)[0];let c=(0,s.ru)(async(e,{params:t},r)=>{try{let{id:i}=t,{searchParams:s}=new URL(e.url),u="true"===s.get("progress");if(!await a.zR.audit.findFirst({where:{id:i,website:{userId:r.id}}}))return n.NextResponse.json({error:"Audit not found"},{status:404});if(u){let e=new o.v,t=await e.getAuditProgress(i);if(!t)return n.NextResponse.json({error:"Failed to get audit progress"},{status:500});return n.NextResponse.json(t)}let c=s.get("categoryId"),l=s.get("status"),p=s.get("severity"),d=parseInt(s.get("page")||"1"),f=parseInt(s.get("pageSize")||"50"),h=(d-1)*f,g={auditId:i};c&&(g.check={categoryId:c}),l&&(g.status=l),p&&(g.severity=p);let[y,w]=await Promise.all([a.zR.auditResult.findMany({where:g,include:{check:{include:{category:!0}}},orderBy:[{severity:"desc"},{createdAt:"asc"}],skip:h,take:f}),a.zR.auditResult.count({where:g})]),m=await a.zR.auditResult.groupBy({by:["status"],where:{auditId:i},_count:{id:!0}}),x=await a.zR.auditResult.groupBy({by:["severity"],where:{auditId:i},_count:{id:!0}});return n.NextResponse.json({results:y,pagination:{page:d,pageSize:f,totalCount:w,totalPages:Math.ceil(w/f)},stats:{categories:m,severities:x}})}catch(e){return console.error(`Error handling audit request for ${t.id}:`,e),n.NextResponse.json({error:"Failed to process audit request"},{status:500})}});i()}catch(e){i(e)}})},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},36344:(e,t)=>{t.A=function(e){return{id:"google",name:"Google",type:"oauth",wellKnown:"https://accounts.google.com/.well-known/openid-configuration",authorization:{params:{scope:"openid email profile"}},idToken:!0,checks:["pkce","state"],profile:e=>({id:e.sub,name:e.name,email:e.email,image:e.picture}),style:{logo:"/google.svg",bg:"#fff",text:"#000"},options:e}}},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65752:(e,t)=>{t.A=function(e){return{id:"github",name:"GitHub",type:"oauth",authorization:{url:"https://github.com/login/oauth/authorize",params:{scope:"read:user user:email"}},token:"https://github.com/login/oauth/access_token",userinfo:{url:"https://api.github.com/user",async request({client:e,tokens:t}){let r=await e.userinfo(t.access_token);if(!r.email){let e=await fetch("https://api.github.com/user/emails",{headers:{Authorization:`token ${t.access_token}`}});if(e.ok){var i;let t=await e.json();r.email=(null!=(i=t.find(e=>e.primary))?i:t[0]).email}}return r}},profile(e){var t;return{id:e.id.toString(),name:null!=(t=e.name)?t:e.login,email:e.email,image:e.avatar_url}},style:{logo:"/github.svg",bg:"#24292f",text:"#fff"},options:e}}},74075:e=>{e.exports=require("zlib")},76926:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(r(61120));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let a={current:null},s="function"==typeof i.cache?i.cache:e=>e,o=console.warn;function u(e){return function(...t){o(e(...t))}}s(e=>{try{o(a.current)}finally{a.current=null}})},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},79748:e=>{e.exports=require("fs/promises")},81630:e=>{e.exports=require("http")},83636:e=>{e.exports=import("puppeteer")},89216:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>l,serverHooks:()=>f,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>d});var n=r(96559),a=r(48088),s=r(37719),o=r(28132),u=e([o]);o=(u.then?(await u)():u)[0];let l=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/audits/[id]/results/route",pathname:"/api/audits/[id]/results",filename:"route",bundlePath:"app/api/audits/[id]/results/route"},resolvedPagePath:"/Users/drgn003/AutomatIQ/AI-website-auditor/app/api/audits/[id]/results/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:p,workUnitAsyncStorage:d,serverHooks:f}=l;function c(){return(0,s.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:d})}i()}catch(e){i(e)}})},94735:e=>{e.exports=require("events")},96330:e=>{e.exports=require("@prisma/client")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[4243,580,9854,8909,1852,6467,3612],()=>r(89216));module.exports=i})();