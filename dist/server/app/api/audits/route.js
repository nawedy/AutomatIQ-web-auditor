"use strict";(()=>{var e={};e.id=3314,e.ids=[3314],e.modules={2321:e=>{e.exports=require("@axe-core/puppeteer")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{e.exports=require("bcrypt")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},12412:e=>{e.exports=require("assert")},22316:e=>{e.exports=require("lighthouse")},26975:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{GET:()=>l,POST:()=>x});var a=t(32190),o=t(7462),i=t(81111),n=t(43254),u=t(45697),p=e([i]);let d=new(i=(p.then?(await p)():p)[0]).v,c=u.z.object({websiteId:u.z.string().uuid(),url:u.z.string().url(),options:u.z.object({seo:u.z.boolean().default(!0),performance:u.z.boolean().default(!0),accessibility:u.z.boolean().default(!0),security:u.z.boolean().default(!0),bestPractices:u.z.boolean().default(!0),mobileUx:u.z.boolean().default(!0),content:u.z.boolean().default(!0)}).optional()}),l=(0,n.ru)(async(e,r,t)=>{try{let{searchParams:r}=new URL(e.url),s=r.get("websiteId"),i=await o.zR.audit.findMany({where:{website:{userId:t.id,...s?{id:s}:{}}},include:{website:!0,summary:!0},orderBy:{createdAt:"desc"}});return a.NextResponse.json({audits:i})}catch(e){return console.error("Error fetching audits:",e),a.NextResponse.json({error:"Failed to fetch audits"},{status:500})}}),x=(0,n.ru)(async(e,r,t)=>{try{let r=await e.json(),s=c.safeParse(r);if(!s.success)return a.NextResponse.json({error:"Invalid request data",details:s.error.format()},{status:400});let{websiteId:i,url:n,options:u}=s.data;if(!await o.zR.website.findUnique({where:{id:i,userId:t.id}}))return a.NextResponse.json({error:"Website not found or not owned by user"},{status:404});let p=await o.zR.audit.create({data:{websiteId:i,status:"pending"}}),l={seo:u?.seo||!1,performance:u?.performance||!1,accessibility:u?.accessibility||!1,security:u?.security||!1,bestPractices:u?.bestPractices||!1,mobile:u?.mobileUx||!1,content:u?.content||!1};return await d.startAudit(i,l),a.NextResponse.json({audit:p},{status:201})}catch(e){return console.error("Error creating audit:",e),a.NextResponse.json({error:"Failed to create audit"},{status:500})}});s()}catch(e){s(e)}})},28344:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{patchFetch:()=>p,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var a=t(96559),o=t(48088),i=t(37719),n=t(26975),u=e([n]);n=(u.then?(await u)():u)[0];let d=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/audits/route",pathname:"/api/audits",filename:"route",bundlePath:"app/api/audits/route"},resolvedPagePath:"/Users/drgn003/AutomatIQ/AI-website-auditor/app/api/audits/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:x}=d;function p(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}s()}catch(e){s(e)}})},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},79748:e=>{e.exports=require("fs/promises")},81630:e=>{e.exports=require("http")},83636:e=>{e.exports=import("puppeteer")},94735:e=>{e.exports=require("events")},96330:e=>{e.exports=require("@prisma/client")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4243,580,9854,8909,1426,1852,6467,3612],()=>t(28344));module.exports=s})();