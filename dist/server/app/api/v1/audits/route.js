(()=>{var e={};e.id=944,e.ids=[944],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>_,routeModule:()=>c,serverHooks:()=>f,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>l});var a=r(96559),o=r(48088),n=r(37719),i=r(32190);let u=new Map;async function d(e){let{searchParams:t}=new URL(e.url),r=t.get("website_id"),s=Number.parseInt(t.get("limit")||"10"),a=Number.parseInt(t.get("offset")||"0");try{let t=e.headers.get("authorization");if(!t||!t.startsWith("Bearer "))return i.NextResponse.json({error:"Missing or invalid API key"},{status:401});if(!t.substring(7).startsWith("ak_live_"))return i.NextResponse.json({error:"Invalid API key format"},{status:401});let o=Array.from(u.values());r&&(o=o.filter(e=>e.website_id===r));let n=o.slice(a,a+s);return i.NextResponse.json({data:n,pagination:{total:o.length,limit:s,offset:a,has_more:a+s<o.length}})}catch(e){return i.NextResponse.json({error:"Internal server error"},{status:500})}}async function l(e){try{let t=e.headers.get("authorization");if(!t||!t.startsWith("Bearer "))return i.NextResponse.json({error:"Missing or invalid API key"},{status:401});if(!t.substring(7).startsWith("ak_live_"))return i.NextResponse.json({error:"Invalid API key format"},{status:401});let{url:r,website_id:s,options:a={}}=await e.json();if(!r)return i.NextResponse.json({error:"URL is required"},{status:400});try{new URL(r)}catch{return i.NextResponse.json({error:"Invalid URL format"},{status:400})}let o=`audit_${Date.now()}_${Math.random().toString(36).substring(2,8)}`,n={id:o,url:r,website_id:s||null,status:"queued",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),options:{include_seo:!1!==a.include_seo,include_performance:!1!==a.include_performance,include_security:!1!==a.include_security,include_ux:!1!==a.include_ux,...a}};return u.set(o,n),setTimeout(()=>{let e={...n,status:"running",updated_at:new Date().toISOString()};u.set(o,e),setTimeout(()=>{let t={...e,status:"completed",updated_at:new Date().toISOString(),results:{overall_score:Math.floor(40*Math.random())+60,seo_score:Math.floor(40*Math.random())+60,performance_score:Math.floor(40*Math.random())+60,security_score:Math.floor(40*Math.random())+60,ux_score:Math.floor(40*Math.random())+60,issues:{critical:Math.floor(5*Math.random()),warning:Math.floor(10*Math.random()),info:Math.floor(15*Math.random())},metrics:{first_contentful_paint:(2*Math.random()+.5).toFixed(1),largest_contentful_paint:(3*Math.random()+1).toFixed(1),cumulative_layout_shift:(.3*Math.random()).toFixed(3),first_input_delay:Math.floor(100*Math.random()+20)}}};u.set(o,t),p(t)},5e3)},1e3),i.NextResponse.json({data:n},{status:201})}catch(e){return i.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(e){console.log("Sending webhook for audit:",e.id);try{await fetch("https://example.com/webhook",{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"AuditPro-Webhook/1.0"},body:JSON.stringify({event:"audit.completed",data:e})})}catch(e){console.error("Webhook failed:",e)}}let c=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/v1/audits/route",pathname:"/api/v1/audits",filename:"route",bundlePath:"app/api/v1/audits/route"},resolvedPagePath:"/Users/drgn003/AutomatIQ/AI-website-auditor/app/api/v1/audits/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:h,workUnitAsyncStorage:m,serverHooks:f}=c;function _(){return(0,n.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:m})}},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,580],()=>r(63710));module.exports=s})();