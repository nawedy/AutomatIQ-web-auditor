"use strict";(()=>{var e={};e.id=9746,e.ids=[9746],e.modules={2321:e=>{e.exports=require("@axe-core/puppeteer")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{e.exports=require("bcrypt")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},12412:e=>{e.exports=require("assert")},22316:e=>{e.exports=require("lighthouse")},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},79748:e=>{e.exports=require("fs/promises")},81630:e=>{e.exports=require("http")},83636:e=>{e.exports=import("puppeteer")},87442:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{patchFetch:()=>p,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var a=t(96559),i=t(48088),o=t(37719),n=t(96679),u=e([n]);n=(u.then?(await u)():u)[0];let d=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/websites/[id]/audit/route",pathname:"/api/websites/[id]/audit",filename:"route",bundlePath:"app/api/websites/[id]/audit/route"},resolvedPagePath:"/Users/drgn003/AutomatIQ/AI-website-auditor/app/api/websites/[id]/audit/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:x}=d;function p(){return(0,o.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}s()}catch(e){s(e)}})},94735:e=>{e.exports=require("events")},96330:e=>{e.exports=require("@prisma/client")},96679:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{GET:()=>l,POST:()=>c});var a=t(32190),i=t(7462),o=t(43254),n=t(81111),u=t(45697),p=e([n]);n=(p.then?(await p)():p)[0];let d=u.z.object({seo:u.z.boolean().default(!0),performance:u.z.boolean().default(!0),accessibility:u.z.boolean().default(!0),bestPractices:u.z.boolean().default(!0),mobile:u.z.boolean().default(!0),security:u.z.boolean().default(!0)}),c=(0,o.ru)(async(e,{params:r},t)=>{try{let s=r.id,o=await e.json().catch(()=>({})),{success:u,data:p}=d.safeParse(o);if(!u)return a.NextResponse.json({error:"Invalid request body"},{status:400});if(!await i.zR.website.findFirst({where:{id:s,userId:t.id}}))return a.NextResponse.json({error:"Website not found"},{status:404});let c=new n.v,l=await c.startAudit(s,p);return a.NextResponse.json({auditId:l,message:"Audit started successfully",status:"pending"},{status:201})}catch(e){return console.error("Error starting audit:",e),a.NextResponse.json({error:"Failed to start audit",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}),l=(0,o.ru)(async(e,{params:r},t)=>{try{let e=r.id;if(!await i.zR.website.findFirst({where:{id:e,userId:t.id}}))return a.NextResponse.json({error:"Website not found"},{status:404});let s=await i.zR.audit.findMany({where:{websiteId:e},include:{summary:!0},orderBy:{createdAt:"desc"}});return a.NextResponse.json({audits:s})}catch(e){return console.error("Error fetching website audits:",e),a.NextResponse.json({error:"Failed to fetch website audits"},{status:500})}});s()}catch(e){s(e)}})}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4243,580,9854,8909,1426,1852,6467,3612],()=>t(87442));module.exports=s})();