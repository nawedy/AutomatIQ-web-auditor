"use strict";exports.id=9061,exports.ids=[9061],exports.modules={3687:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{t:()=>l});var i=a(83636),r=a(2321),n=a(16809),o=e([i]);i=(o.then?(await o)():o)[0];class l extends n.Y{async analyze(e){try{let t=await i.default.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]}),a=await t.newPage();await a.goto(e,{waitUntil:"networkidle2",timeout:3e4});let s=await new r.AxePuppeteer(a).analyze(),n=this.extractViolations(s.violations),o=this.extractPasses(s.passes),l=this.extractIncomplete(s.incomplete),c=this.generateSummary(n,o,l),u=this.calculateWCAGCompliance(n,o),h=this.calculateAccessibilityScore(n,c.totalViolations);return await t.close(),{score:h,wcagCompliance:u,violations:n,passes:o,incomplete:l,summary:c}}catch(e){throw console.error("Error in accessibility analysis:",e),Error(`Accessibility analysis failed: ${e.message}`)}}extractViolations(e){return e.map(e=>({id:e.id,impact:e.impact,description:e.description,helpUrl:e.helpUrl,nodes:e.nodes.length,wcagCriteria:this.extractWCAGCriteria(e.tags)}))}extractPasses(e){return e.map(e=>({id:e.id,description:e.description,nodes:e.nodes.length}))}extractIncomplete(e){return e.map(e=>({id:e.id,impact:e.impact,description:e.description,helpUrl:e.helpUrl,nodes:e.nodes.length}))}generateSummary(e,t,a){let s=e.length,i=e.filter(e=>"critical"===e.impact).length,r=e.filter(e=>"serious"===e.impact).length,n=e.filter(e=>"moderate"===e.impact).length,o=e.filter(e=>"minor"===e.impact).length,l=t.length,c=a.length;return{totalViolations:s,criticalViolations:i,seriousViolations:r,moderateViolations:n,minorViolations:o,totalPasses:l,totalIncomplete:c}}calculateWCAGCompliance(e,t){let a=new Set;e.forEach(e=>{e.wcagCriteria.forEach(e=>a.add(e))});let s=Array.from(a).filter(e=>e.startsWith("wcag2a")).length,i=Array.from(a).filter(e=>e.startsWith("wcag2aa")).length,r=Array.from(a).filter(e=>e.startsWith("wcag2aaa")).length,n=Math.max(0,Math.round((30-s)/30*100)),o=Math.max(0,Math.round((20-i)/20*100)),l=Math.max(0,Math.round((28-r)/28*100));return{aCompliance:n,aaCompliance:o,aaaCompliance:l}}calculateAccessibilityScore(e,t){if(0===t)return 100;let a={critical:4,serious:3,moderate:2,minor:1},s=0;e.forEach(e=>{s+=a[e.impact]*e.nodes});let i=Math.max(0,100-5*s);return Math.round(i)}extractWCAGCriteria(e){return e.filter(e=>e.startsWith("wcag2a")||e.startsWith("wcag2aa")||e.startsWith("wcag2aaa"))}}s()}catch(e){s(e)}})},7462:(e,t,a)=>{a.d(t,{Gr:()=>n,zR:()=>r});var s=a(96330),i=a(88909);let r=globalThis.prisma??new s.PrismaClient({log:["error"],datasources:{db:{url:process.env.DATABASE_URL}}});async function n(e){try{await r.$executeRaw`SELECT set_config('app.current_user_id', ${e}, false)`}catch(e){throw console.error("Failed to set current user ID:",e),e}}process.env.DATABASE_URL&&new i.bC({connectionString:process.env.DATABASE_URL})},15651:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{r:()=>o});var i=a(83636),r=a(16809),n=e([i]);i=(n.then?(await n)():n)[0];class o extends r.Y{async analyze(e){try{let t=await i.default.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]}),a=await t.newPage();await a.setRequestInterception(!0);let s=[];a.on("request",e=>{let t=e.url(),a="unknown";t.includes("google-analytics.com")||t.includes("analytics.google.com")||t.includes("gtag")?a="Google Analytics":t.includes("googletagmanager.com")?a="Google Tag Manager":t.includes("facebook.com/tr")||t.includes("connect.facebook.net")?a="Facebook Pixel":t.includes("hotjar.com")?a="Hotjar":t.includes("clarity.ms")?a="Microsoft Clarity":t.includes("segment.com")||t.includes("segment.io")?a="Segment":t.includes("mixpanel.com")?a="Mixpanel":t.includes("amplitude.com")?a="Amplitude":t.includes("matomo")||t.includes("piwik")?a="Matomo/Piwik":t.includes("plausible.io")?a="Plausible":t.includes("fathom.com")||t.includes("usefathom.com")?a="Fathom":t.includes("adobe")&&(t.includes("analytics")||t.includes("omniture"))?a="Adobe Analytics":t.includes("kissmetrics.com")?a="Kissmetrics":t.includes("crazyegg.com")?a="Crazy Egg":t.includes("optimizely.com")?a="Optimizely":t.includes("fullstory.com")&&(a="FullStory"),"unknown"!==a&&s.push({url:t,type:a,timestamp:Date.now()}),e.continue()}),await a.goto(e,{waitUntil:"networkidle2",timeout:3e4}),await a.waitForTimeout(3e3);let r=await a.evaluate(()=>{let e=Array.from(document.querySelectorAll("script")),t=[{pattern:/ga\s*\(|gtag|google-analytics|googletagmanager|analytics\.js/i,type:"Google Analytics"},{pattern:/fbq\s*\(|facebook-pixel|facebook\.com\/tr|fbevents\.js/i,type:"Facebook Pixel"},{pattern:/hotjar/i,type:"Hotjar"},{pattern:/clarity/i,type:"Microsoft Clarity"},{pattern:/segment/i,type:"Segment"},{pattern:/mixpanel/i,type:"Mixpanel"},{pattern:/amplitude/i,type:"Amplitude"},{pattern:/matomo|piwik/i,type:"Matomo/Piwik"},{pattern:/plausible/i,type:"Plausible"},{pattern:/fathom/i,type:"Fathom"},{pattern:/adobe.*analytics|omniture|sitecatalyst/i,type:"Adobe Analytics"},{pattern:/kissmetrics/i,type:"Kissmetrics"},{pattern:/crazyegg/i,type:"Crazy Egg"},{pattern:/optimizely/i,type:"Optimizely"},{pattern:/fullstory/i,type:"FullStory"}],a=[];return e.forEach(e=>{let s=e.getAttribute("src")||"",i=e.textContent||"";t.forEach(({pattern:e,type:t})=>{(s&&e.test(s)||e.test(i))&&a.push({type:t,implementation:s?"external":"inline"})})}),a}),n=await a.evaluate(()=>void 0!==window.dataLayer),o=await a.evaluate(()=>{let e=[/\.addEventListener\s*\(/,/onclick\s*=/,/gtag\s*\(\s*['"]event/,/ga\s*\(\s*['"]send/,/fbq\s*\(\s*['"]track/,/analytics\.track/,/mixpanel\.track/,/amplitude\.track/];if(document.querySelectorAll("[onclick], [onsubmit], [onchange]").length>0)return!0;for(let t of Array.from(document.querySelectorAll("script"))){let a=t.textContent||"";for(let t of e)if(t.test(a))return!0}return!1}),l=await a.evaluate(()=>{let e=[/cookieconsent/i,/gdpr/i,/consent/i,/cookiebot/i,/onetrust/i,/trustarc/i,/cookiehub/i,/osano/i,/cookie-script/i,/cookie banner/i,/cookie notice/i,/cookie policy/i];if(document.querySelectorAll('[class*="cookie"], [class*="consent"], [class*="gdpr"], [id*="cookie"], [id*="consent"], [id*="gdpr"]').length>0)return!0;for(let t of Array.from(document.querySelectorAll("script"))){let a=t.getAttribute("src")||"",s=t.textContent||"";for(let t of e)if(t.test(a)||t.test(s))return!0}let t=document.body.textContent||"";for(let e of[/we use cookies/i,/cookie policy/i,/privacy policy/i,/accept cookies/i,/cookie preferences/i,/cookie settings/i])if(e.test(t))return!0;return!1}),c=new Map;r.forEach(e=>{c.has(e.type)||c.set(e.type,{detected:!0,implementation:e.implementation,requests:0})}),s.forEach(e=>{if(c.has(e.type)){let t=c.get(e.type);t.requests+=1}else c.set(e.type,{detected:!0,implementation:"network",requests:1})});let u=Array.from(c.entries()).map(([e,t])=>({name:e,...t})),h=[],d=[];0===u.length&&(h.push("No analytics tools detected"),d.push("Implement an analytics solution to track user behavior and site performance")),u.length>3&&(h.push(`Multiple analytics tools detected (${u.length}), which may impact page performance`),d.push("Consider consolidating analytics tools to reduce page load impact")),!o&&u.length>0&&(h.push("Analytics tools detected but no event tracking found"),d.push("Implement event tracking for user interactions to gather more valuable data")),!l&&u.length>0&&(h.push("No consent management detected for analytics cookies"),d.push("Implement a consent management solution to comply with privacy regulations like GDPR and CCPA")),n?d.push("Good: Data layer detected, which enables more flexible and maintainable tracking"):u.length>0&&(h.push("No data layer detected"),d.push("Implement a data layer for more structured and maintainable analytics implementation")),await t.close();let m=0;return u.length>0&&(m+=60),o&&(m+=15),l&&(m+=15),n&&(m+=10),u.length>3&&(m-=10),{score:m=Math.max(0,Math.min(100,m)),detectedTools:u,hasDataLayer:n,hasEventTracking:o,hasConsentManagement:l,issues:h,recommendations:d}}catch(e){throw console.error("Error in analytics integration analysis:",e),Error(`Analytics integration analysis failed: ${e.message}`)}}}s()}catch(e){s(e)}})},16809:(e,t,a)=>{a.d(t,{Y:()=>s});class s{calculateScore(e,t){return 0===t?100:Math.round(e/t*100)}calculateWeightedScore(e,t=1){if(0===e.length)return 100;let a=0,s=0;for(let i of e){let e=i.weight||t;s+=i.score*e,a+=e}return Math.round(s/a)}normalizeUrl(e){try{return new URL(e).toString()}catch(t){return e}}extractDomain(e){try{return new URL(e).hostname}catch(e){return""}}truncateString(e,t){return e?e.length>t?`${e.substring(0,t)}...`:e:""}sanitizeHtml(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim()}countWords(e){return e.split(/\s+/).filter(Boolean).length}getTextContent(e){return this.sanitizeHtml(e)}}},18292:(e,t,a)=>{let s,i;a.d(t,{n:()=>c});var r=a(16809),n=a(29021),o=a(33873),l=a(21820);a(50456);class c extends r.Y{async analyze(e){try{let t=await s.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]}),a=await this.testBrowserCompatibility(t,e),i=await this.testVisualConsistency(t,e),r=await this.testFeatureCompatibility(t,e),n=await this.testResponsiveConsistency(t,e);await t.close();let o=this.calculateWeightedScore([{score:a.score,weight:2.5},{score:i.score,weight:2},{score:r.score,weight:2.5},{score:n.score,weight:3}]),l=[...a.issues,...i.issues,...r.issues,...n.issues];return{score:o,browserCompatibility:a,visualConsistency:i,featureCompatibility:r,responsiveConsistency:n,issues:l}}catch(e){throw console.error("Error in cross-browser analysis:",e),Error(`Cross-browser analysis failed: ${e.message}`)}}async testBrowserCompatibility(e,t){let a=[],s=[];for(let i of this.browserConfigs){let r=await e.newPage();await r.setUserAgent(i.userAgent);try{await r.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e=[];r.on("console",t=>{"error"===t.type()&&e.push(t.text())}),await r.waitForTimeout(2e3);let n=await r.evaluate(()=>window.JSErrors||[]),o=await r.evaluate(()=>{let e=[];for(let t of document.querySelectorAll("*")){window.getComputedStyle(t);let a=t.getBoundingClientRect();(a.left<0||a.top<0)&&e.push(`Element ${t.tagName.toLowerCase()} has negative position`)}return document.body.scrollWidth>window.innerWidth&&e.push("Horizontal scrollbar detected"),e}),l=[...e.map(e=>`Console error: ${e}`),...n.map(e=>`JS error: ${e}`),...o],c=Math.max(0,100-10*l.length);a.push({browser:i.name,issues:l,score:c,passed:0===l.length}),l.length>0&&s.push(`${i.name} browser issues: ${l.length} found`)}catch(e){console.error(`Error testing ${i.name}:`,e),s.push(`Failed to test ${i.name}: ${e.message}`),a.push({browser:i.name,issues:[`Test failed: ${e.message}`],score:0,passed:!1})}finally{await r.close()}}let i=Math.round(a.reduce((e,t)=>e+t.score,0)/this.browserConfigs.length);return{browsers:a,issues:s,score:i}}async testVisualConsistency(e,t){let a=o.join(l.tmpdir(),"automatiq-screenshots");n.existsSync(a)||n.mkdirSync(a,{recursive:!0});let s={},r=[],c=[];for(let i of this.browserConfigs){let n=await e.newPage();try{await n.setUserAgent(i.userAgent),await n.setViewport({width:1366,height:768}),await n.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e=o.join(a,`${i.name.toLowerCase()}.png`);await n.screenshot({path:e,fullPage:!1}),s[i.name]=e}catch(e){console.error(`Error capturing screenshot for ${i.name}:`,e),r.push(`Failed to capture screenshot for ${i.name}: ${e.message}`)}finally{await n.close()}}let u=Object.keys(s);for(let e=0;e<u.length;e++)for(let t=e+1;t<u.length;t++){let a=u[e],o=u[t];try{let e=n.readFileSync(s[a]),t=n.readFileSync(s[o]),l=(await i(e,t,{output:{largeImageThreshold:1200}})).rawMisMatchPercentage,u=l<5;c.push({browsers:[a,o],difference:l,passed:u}),u||r.push(`Visual difference between ${a} and ${o}: ${l.toFixed(2)}%`)}catch(e){console.error(`Error comparing ${a} and ${o}:`,e),r.push(`Failed to compare ${a} and ${o}: ${e.message}`)}}Object.values(s).forEach(e=>{try{n.unlinkSync(e)}catch(t){console.error(`Error deleting screenshot ${e}:`,t)}});let h=Math.round(c.filter(e=>e.passed).length/(c.length||1)*100);return{comparisons:c,issues:r,score:h}}async testFeatureCompatibility(e,t){let a=[{name:"CSS Grid",test:"typeof document.createElement('div').style.grid !== 'undefined'"},{name:"Flexbox",test:"typeof document.createElement('div').style.flexDirection !== 'undefined'"},{name:"CSS Variables",test:"window.CSS && window.CSS.supports && window.CSS.supports('--a', '0')"},{name:"ES6 Features",test:"typeof Promise !== 'undefined' && typeof Symbol !== 'undefined' && typeof Map !== 'undefined'"},{name:"Fetch API",test:"typeof fetch !== 'undefined'"},{name:"WebP Support",test:"document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') === 0"},{name:"WebGL",test:"(() => { try { return !!document.createElement('canvas').getContext('webgl'); } catch(e) { return false; } })()"},{name:"Touch Events",test:"'ontouchstart' in window || navigator.maxTouchPoints > 0"},{name:"Service Workers",test:"'serviceWorker' in navigator"},{name:"WebRTC",test:"typeof RTCPeerConnection !== 'undefined'"}],s=[],i=[];for(let r of this.browserConfigs){let n=await e.newPage();try{for(let e of(await n.setUserAgent(r.userAgent),await n.goto(t,{waitUntil:"networkidle2",timeout:3e4}),a)){let t=await n.evaluate(`(function() { return ${e.test}; })()`);s.push({feature:e.name,browser:r.name,supported:t}),t||i.push(`${e.name} not supported in ${r.name}`)}}catch(e){console.error(`Error testing features for ${r.name}:`,e),i.push(`Failed to test features for ${r.name}: ${e.message}`),a.forEach(e=>{s.push({feature:e.name,browser:r.name,supported:!1})})}finally{await n.close()}}let r=Math.round(s.filter(e=>e.supported).length/(s.length||1)*100);return{features:s,issues:i,score:r}}async testResponsiveConsistency(e,t){let a=[],s=[];for(let i of this.viewportSizes){let r=await e.newPage();try{await r.setViewport({width:i.width,height:i.height}),await r.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e=await r.evaluate(()=>{let e=[];for(let t of(document.body.scrollWidth>window.innerWidth&&e.push("Horizontal scrollbar detected"),document.querySelectorAll("*")))t.getBoundingClientRect().right>window.innerWidth+5&&e.push(`Element ${t.tagName.toLowerCase()} extends beyond viewport width`);if(window.innerWidth<768)for(let t of document.querySelectorAll('a, button, [role="button"], input, select, textarea')){let a=t.getBoundingClientRect();(a.width<44||a.height<44)&&e.push(`Tap target ${t.tagName.toLowerCase()} is too small for mobile`)}for(let t of document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, a, button")){let a=window.getComputedStyle(t);if(a.fontSize.endsWith("px")){let t=parseFloat(a.fontSize);t<16&&"fixed"===a.position&&e.push(`Fixed position text with small font size (${t}px)`)}}return e}),n=Math.max(0,100-10*e.length);a.push({viewport:i.name,width:i.width,height:i.height,issues:e,score:n}),e.length>0&&s.push(`${i.name} (${i.width}x${i.height}) issues: ${e.length} found`)}catch(e){console.error(`Error testing responsive design for ${i.name}:`,e),s.push(`Failed to test ${i.name} viewport: ${e.message}`),a.push({viewport:i.name,width:i.width,height:i.height,issues:[`Test failed: ${e.message}`],score:0})}finally{await r.close()}}let i=Math.round(a.reduce((e,t)=>e+t.score,0)/this.viewportSizes.length);return{viewports:a,issues:s,score:i}}async analyzeCrossBrowserCompatibility(e){let t=[],a=[];for(let i of this.browserConfigs){let r=await s.launch(i.options),n=await r.newPage();try{await n.goto(e,{waitUntil:"networkidle0",timeout:3e4});let s=await this.testBrowserCompatibility(n,i),r=100-10*s.length;t.push({browser:i.name,issues:s,score:Math.max(0,Math.min(100,r))}),s.length>0&&a.push(`${i.name} browser issues: ${s.length} found`),await n.close()}catch(e){await n.close(),console.error(`Error testing ${i.name}:`,e),t.push({browser:i.name,issues:[`Failed to load: ${e.message}`],score:0}),a.push(`${i.name} browser failed to load the page`)}}let i=Math.round(t.reduce((e,t)=>e+t.score,0)/t.length);return{browserResults:t,issues:a,score:i}}async testVisualConsistency(e,t){let a=[],s=[],i={};for(let r of this.browserConfigs){let n=await e.newPage();await n.setUserAgent(r.userAgent),await n.setViewport({width:1366,height:768});try{await n.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e=await n.screenshot({encoding:"base64"});i[r.name]=e;let s=await n.evaluate(()=>({images:document.querySelectorAll("img").length,buttons:document.querySelectorAll('button, .button, [role="button"]').length,forms:document.querySelectorAll("form").length,tables:document.querySelectorAll("table").length,fonts:Array.from(document.querySelectorAll("*")).map(e=>window.getComputedStyle(e).fontFamily).filter((e,t,a)=>a.indexOf(e)===t).length}));a.push({browser:r.name,elements:s,screenshot:`data:image/png;base64,${e}`}),await n.close()}catch(e){await n.close(),console.error(`Error taking screenshot in ${r.name}:`,e),s.push(`Failed to capture visual state in ${r.name}`)}}if(a.length>1){let e=a[0].elements;for(let t=1;t<a.length;t++){let i=a[t].elements;e.images!==i.images&&s.push(`Image count differs between ${a[0].browser} (${e.images}) and ${a[t].browser} (${i.images})`),e.buttons!==i.buttons&&s.push(`Button count differs between ${a[0].browser} (${e.buttons}) and ${a[t].browser} (${i.buttons})`),e.forms!==i.forms&&s.push(`Form count differs between ${a[0].browser} (${e.forms}) and ${a[t].browser} (${i.forms})`),e.tables!==i.tables&&s.push(`Table count differs between ${a[0].browser} (${e.tables}) and ${a[t].browser} (${i.tables})`),Math.abs(e.fonts-i.fonts)>2&&s.push(`Font count differs significantly between ${a[0].browser} (${e.fonts}) and ${a[t].browser} (${i.fonts})`)}}let r=Math.max(0,100-15*s.length);return{visualResults:a,issues:s,score:r}}async testFeatureCompatibility(e,t){let a=[],s=[],i=[{name:"Flexbox",test:"return !!window.getComputedStyle(document.documentElement).flex;"},{name:"Grid",test:"return !!window.getComputedStyle(document.documentElement).grid;"},{name:"CSS Variables",test:'return window.CSS && window.CSS.supports && window.CSS.supports("--test", "0");'},{name:"ES6 Features",test:'try { eval("let a = () => {}; class Test {}; new Promise(() => {});"); return true; } catch(e) { return false; }'},{name:"Fetch API",test:'return typeof fetch === "function";'},{name:"WebP Support",test:'const canvas = document.createElement("canvas"); return canvas.toDataURL("image/webp").indexOf("data:image/webp") === 0;'},{name:"WebGL",test:'try { const canvas = document.createElement("canvas"); return !!canvas.getContext("webgl") || !!canvas.getContext("experimental-webgl"); } catch(e) { return false; }'},{name:"Local Storage",test:'try { localStorage.setItem("test", "test"); localStorage.removeItem("test"); return true; } catch(e) { return false; }'},{name:"Session Storage",test:'try { sessionStorage.setItem("test", "test"); sessionStorage.removeItem("test"); return true; } catch(e) { return false; }'},{name:"IndexedDB",test:"return !!window.indexedDB;"}];for(let r of this.browserConfigs){let n=await e.newPage();await n.setUserAgent(r.userAgent);try{await n.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e={};for(let t of i)try{e[t.name]=await n.evaluate(t.test)}catch(a){e[t.name]=!1}let o=await n.evaluate(()=>({usesFlexbox:!!Array.from(document.querySelectorAll("*")).find(e=>"flex"===window.getComputedStyle(e).display||"inline-flex"===window.getComputedStyle(e).display),usesGrid:!!Array.from(document.querySelectorAll("*")).find(e=>"grid"===window.getComputedStyle(e).display||"inline-grid"===window.getComputedStyle(e).display),usesCSSVariables:!!document.querySelector(":root")&&Object.keys(window.getComputedStyle(document.querySelector(":root"))).some(e=>e.startsWith("--")),usesWebP:!!Array.from(document.querySelectorAll("img")).find(e=>e.src.endsWith(".webp")||e.srcset.includes(".webp"))})),l=[];o.usesFlexbox&&!e.Flexbox&&l.push("Page uses Flexbox but browser may not support it"),o.usesGrid&&!e.Grid&&l.push("Page uses CSS Grid but browser may not support it"),o.usesCSSVariables&&!e["CSS Variables"]&&l.push("Page uses CSS Variables but browser may not support them"),o.usesWebP&&!e["WebP Support"]&&l.push("Page uses WebP images but browser may not support them");let c=Object.values(e).filter(Boolean).length,u=Math.round(c/i.length*100);a.push({browser:r.name,features:e,issues:l,score:u}),l.length>0&&s.push(`${r.name} feature compatibility issues: ${l.join(", ")}`),await n.close()}catch(e){await n.close(),console.error(`Error testing features in ${r.name}:`,e),s.push(`Failed to test features in ${r.name}`)}}let r=Math.round(a.reduce((e,t)=>e+t.score,0)/a.length);return{featureResults:a,issues:s,score:r}}async testResponsiveConsistency(e,t){let a=[],s=[];for(let i of this.browserConfigs){let r=[];for(let a of this.viewportSizes){let n=await e.newPage();await n.setUserAgent(i.userAgent),await n.setViewport({width:a.width,height:a.height});try{await n.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e=await n.evaluate(()=>{let e=[];for(let t of(document.body.scrollWidth>window.innerWidth&&e.push("Horizontal scrollbar detected"),document.querySelectorAll("*")))if(t.getBoundingClientRect().right>window.innerWidth+5){e.push("Element extends beyond viewport width");break}for(let t of document.querySelectorAll("p, span, a, h1, h2, h3, h4, h5, h6, li, td, th"))if(12>parseFloat(window.getComputedStyle(t).fontSize)&&t.textContent?.trim()){e.push("Text smaller than 12px detected");break}if(window.innerWidth<768)for(let t of document.querySelectorAll("a, button, input, select, textarea")){let a=t.getBoundingClientRect();if((a.width<44||a.height<44)&&a.width>0&&a.height>0&&null!==t.offsetParent){e.push("Touch targets smaller than 44x44px detected");break}}return e}),o=await n.screenshot({encoding:"base64"});r.push({viewport:a.name,width:a.width,height:a.height,issues:e,screenshot:`data:image/png;base64,${o}`}),e.length>0&&s.push(`${i.name} at ${a.name} (${a.width}x${a.height}) has ${e.length} responsive issues`),await n.close()}catch(e){await n.close(),console.error(`Error testing ${i.name} at ${a.name}:`,e),r.push({viewport:a.name,width:a.width,height:a.height,issues:[`Failed to load: ${e.message}`],screenshot:""}),s.push(`Failed to test ${i.name} at ${a.name} viewport`)}}let n=Math.max(0,100-5*r.reduce((e,t)=>e+t.issues.length,0));a.push({browser:i.name,viewportTests:r,score:n})}let i=Math.round(a.reduce((e,t)=>e+t.score,0)/a.length);return{responsiveResults:a,issues:s,score:i}}constructor(...e){super(...e),this.browserConfigs=[{name:"Chrome",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"},{name:"Firefox",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:89.0) Gecko/20100101 Firefox/89.0"},{name:"Safari",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.1 Safari/605.1.15"},{name:"Edge",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36 Edg/91.0.864.59"}],this.viewportSizes=[{width:1920,height:1080,name:"Desktop"},{width:1366,height:768,name:"Laptop"},{width:768,height:1024,name:"Tablet"},{width:375,height:812,name:"Mobile"}]}}},22852:(e,t,a)=>{a.d(t,{Y:()=>c});var s=a(6156),i=a(18343),r=a(16809);class n{analyze(e){let t=[],a=this.cleanText(e),s=this.countSentences(a),i=this.countWords(a),r=this.countSyllables(a),n=this.countCharacters(a),o=i/s,l=n/i,c=this.calculateFleschKincaidScore(i,s,r),u=this.getFleschKincaidGrade(c),h=this.calculateSMOGIndex(s,this.countComplexWords(a)),d=this.calculateColemanLiauIndex(i,s,n),m=this.calculateAutomatedReadabilityIndex(n,i,s),g=(this.fleschKincaidScoreToGrade(c)+h+d+m)/4;o>25&&t.push("Average sentence length is too high (over 25 words)"),l>5.5&&t.push("Average word length is high, consider using simpler words"),g>12?t.push("Content may be too difficult for general audience (above 12th grade level)"):g<6&&t.push("Content may be too simplistic for professional context (below 6th grade level)");let p=100;return c<30?p=50:c<50?p=70:c>90&&(p=80),p-=10*t.length,{fleschKincaidScore:c,fleschKincaidGrade:u,smogIndex:h,colemanLiauIndex:d,automatedReadabilityIndex:m,averageGradeLevel:g,averageSentenceLength:o,averageWordLength:l,issues:t,score:p=Math.max(0,Math.min(100,p))}}cleanText(e){return e.replace(/\s+/g," ").replace(/[^\w\s.!?]/g,"").trim()}countSentences(e){let t=e.match(/[.!?]+/g);return t?t.length:1}countWords(e){return e.split(/\s+/).filter(Boolean).length||1}countCharacters(e){return e.replace(/\s/g,"").length||1}countSyllables(e){let t=e.toLowerCase().split(/\s+/).filter(Boolean),a=0;for(let e of t)a+=this.countWordSyllables(e);return a||1}countWordSyllables(e){if((e=e.toLowerCase().replace(/[^a-z]/g,"")).length<=3)return 1;let t=(e=(e=e.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,"")).replace(/^y/,"")).match(/[aeiouy]{1,2}/g);return t?t.length:1}countComplexWords(e){let t=e.toLowerCase().split(/\s+/).filter(Boolean),a=0;for(let e of t)this.countWordSyllables(e)>=3&&a++;return a}calculateFleschKincaidScore(e,t,a){return 206.835-e/t*1.015-a/e*84.6}getFleschKincaidGrade(e){return e>=90?"Very Easy (5th grade)":e>=80?"Easy (6th grade)":e>=70?"Fairly Easy (7th grade)":e>=60?"Standard (8th-9th grade)":e>=50?"Fairly Difficult (10th-12th grade)":e>=30?"Difficult (College)":"Very Difficult (College Graduate)"}fleschKincaidScoreToGrade(e){return e>=90?5:e>=80?6:e>=70?7:e>=60?8.5:e>=50?11:e>=30?14:18}calculateSMOGIndex(e,t){return 1.043*Math.sqrt(30/e*t)+3.1291}calculateColemanLiauIndex(e,t,a){return a/e*5.88-t/e*100*.296-15.8}calculateAutomatedReadabilityIndex(e,t,a){return e/t*4.71+t/a*.5-21.43}}class o{analyze(e){let t=0,a=0,s=0,i=[],r=e.split(/\s+/);for(let t=0;t<r.length;t++){let s=r[t].toLowerCase().replace(/[^a-z]/g,"");if(this.commonMisspellings[s]){a++;let t=RegExp(`\\b${s}\\b`,"i"),r=e.match(t);if(r&&void 0!==r.index){let t=r.index,a=r[0].length,n=Math.max(0,t-20),o=Math.min(e.length,t+a+20);i.push({type:"spelling",message:`"${r[0]}" should be "${this.commonMisspellings[s]}"`,offset:t,length:a,context:e.substring(n,o)})}}}for(let a of this.grammarRules)for(let s of e.matchAll(a.pattern))if(void 0!==s.index){t++;let r=s.index,n=s[0].length,o=Math.max(0,r-20),l=Math.min(e.length,r+n+20);i.push({type:"grammar",message:a.message,offset:r,length:n,context:e.substring(o,l)})}for(let t of this.styleIssues)for(let a of e.matchAll(t.pattern))if(void 0!==a.index){s++;let r=a.index,n=a[0].length,o=Math.max(0,r-20),l=Math.min(e.length,r+n+20);i.push({type:"style",message:t.message,offset:r,length:n,context:e.substring(o,l)})}let n=[];a>0&&n.push(`Found ${a} spelling error${1!==a?"s":""}`),t>0&&n.push(`Found ${t} grammar error${1!==t?"s":""}`),s>0&&n.push(`Found ${s} style issue${1!==s?"s":""}`);let o=a+t,l=r.length,c=100-Math.min(100,Math.round(1e3*(l>0?o/l:0)));return c-=Math.min(20,Math.round(500*(l>0?s/l:0))),{grammarErrors:t,spellingErrors:a,styleIssues:s,errorDetails:i,issues:n,score:c=Math.max(0,Math.min(100,c))}}constructor(){this.commonMisspellings={accomodate:"accommodate",acheive:"achieve",accross:"across",agressive:"aggressive",apparant:"apparent",begining:"beginning",beleive:"believe",buisness:"business",calender:"calendar",catagory:"category",cemetary:"cemetery",collegue:"colleague",comming:"coming",commited:"committed",concious:"conscious",definately:"definitely",dissapoint:"disappoint",embarass:"embarrass",enviroment:"environment",existance:"existence",familar:"familiar",finaly:"finally",foriegn:"foreign",goverment:"government",grammer:"grammar",happend:"happened",harrassment:"harassment",immediatly:"immediately",independant:"independent",interupt:"interrupt",knowlege:"knowledge",liason:"liaison",libary:"library",lisence:"license",maintainance:"maintenance",millenium:"millennium",neccessary:"necessary",noticable:"noticeable",occassion:"occasion",occured:"occurred",persistant:"persistent",pharoah:"pharaoh",posession:"possession",prefered:"preferred",publically:"publicly",recieve:"receive",recomend:"recommend",refered:"referred",relevent:"relevant",religous:"religious",rember:"remember",seperate:"separate",seige:"siege",succesful:"successful",supercede:"supersede",supress:"suppress",tommorow:"tomorrow",truely:"truly",unforseen:"unforeseen",unfortunatly:"unfortunately",untill:"until",wierd:"weird"},this.grammarRules=[{pattern:/\b(its|it's)\s+(?:a|the)\s+(?:company|business|organization|group|team)(?:'s)?\s+(?:that|which|who)\b/gi,message:"Use 'that' not 'who' for companies",replacement:"it's a company that"},{pattern:/\b(there|their|they're)\s+(is|are)\b/gi,message:"Check usage of 'there', 'their', or 'they're'",replacement:"there is"},{pattern:/\b(your|you're)\s+(welcome|welcomed)\b/gi,message:"Check usage of 'your' vs 'you're'",replacement:"you're welcome"},{pattern:/\b(affect|effect)\s+(on|upon)\b/gi,message:"Check usage of 'affect' vs 'effect'",replacement:"effect on"},{pattern:/\b(accept|except)\s+(for|from|that)\b/gi,message:"Check usage of 'accept' vs 'except'",replacement:"except for"},{pattern:/\b(advice|advise)\s+(on|about)\b/gi,message:"Check usage of 'advice' vs 'advise'",replacement:"advice on"},{pattern:/\b(amount|number)\s+of\s+(?:people|employees|customers|users)\b/gi,message:"Use 'number of' for countable items, not 'amount of'",replacement:"number of people"},{pattern:/\b(between|among)\s+the\s+(?:three|four|five|six|seven|eight|nine|ten)\b/gi,message:"Use 'among' for three or more items, not 'between'",replacement:"among the three"},{pattern:/\b(less|fewer)\s+(?:people|employees|customers|users|items|products)\b/gi,message:"Use 'fewer' for countable items, not 'less'",replacement:"fewer people"},{pattern:/\b(which|that)\s+(?:he|she|they|we|you)\b/gi,message:"Use 'who' for people, not 'which' or 'that'",replacement:"who they"}],this.styleIssues=[{pattern:/\b(very|really|extremely|incredibly|absolutely)\s+\w+/gi,message:"Consider removing intensifiers like 'very', 'really', etc. for stronger writing"},{pattern:/\b(in order to|due to the fact that|for the purpose of|in the event that)\b/gi,message:"Consider simplifying wordy phrases"},{pattern:/\b(utilize|utilization|utilizes|utilizing)\b/gi,message:"Consider using 'use' instead of 'utilize' for simplicity"},{pattern:/\b(at this point in time|at the present time)\b/gi,message:"Consider using 'now' or 'currently' instead"},{pattern:/\bthe fact that\b/gi,message:"Consider removing 'the fact that' for conciseness"},{pattern:/\b(is able to|are able to|was able to|were able to)\b/gi,message:"Consider using 'can', 'could', or 'may' instead"},{pattern:/\b(a large number of|a majority of)\b/gi,message:"Consider using 'many' or 'most' instead"},{pattern:/\b(firstly|secondly|thirdly|lastly)\b/gi,message:"Consider using 'first', 'second', 'third', 'last' instead"},{pattern:/\b(commence|commenced|commences|commencing)\b/gi,message:"Consider using 'begin' or 'start' instead of 'commence'"},{pattern:/\b(prior to|subsequent to)\b/gi,message:"Consider using 'before' or 'after' instead"}]}}class l{analyze(e){let t=i.Hh(e),a=[],s=this.analyzeHeadingStructure(t),r=this.analyzeParagraphStructure(t),n=this.analyzeListStructure(t),o=this.analyzeSectionStructure(t),l=this.analyzeContentOrganization(t);a.push(...s.issues),a.push(...r.issues),a.push(...n.issues),a.push(...o.issues),a.push(...l.issues);let c=this.calculateOverallScore([{score:s.score,weight:2.5},{score:r.score,weight:2},{score:n.score,weight:1.5},{score:o.score,weight:2},{score:l.score,weight:2}]);return{headingStructure:s,paragraphStructure:r,listStructure:n,sectionStructure:o,contentOrganization:l,issues:a,score:c}}analyzeHeadingStructure(e){let t=e("h1, h2, h3, h4, h5, h6"),a={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0},s=[],i=!0,r=0;t.each((e,t)=>{let n=t.tagName.toLowerCase();a[n]++;let o=parseInt(n.substring(1),10);r>0&&o>r+1&&(i=!1,s.push(`Heading hierarchy skips from h${r} to h${o}`)),r=o}),a.h1>1&&s.push(`Multiple h1 tags found (${a.h1}), should have only one for SEO`),0===a.h1&&s.push("No h1 tag found, main heading is missing");let n=Object.values(a).reduce((e,t)=>e+t,0);n>20&&s.push(`Too many headings (${n}), consider consolidating content`);let o=100;return 0===a.h1&&(o-=30),a.h1>1&&(o-=20),i||(o-=25),n>20&&(o-=15),{hasProperHierarchy:i,headingCount:a,issues:s,score:o=Math.max(0,Math.min(100,o))}}analyzeParagraphStructure(e){let t=e("p"),a=[],s=0,i=0,r=0;t.each((t,a)=>{let n=e(a).text().trim().split(/\s+/).filter(Boolean).length;s+=n,n>150&&i++,n<20&&n>0&&r++});let n=t.length,o=n>0?s/n:0;i>0&&a.push(`${i} paragraph${1!==i?"s":""} exceed 150 words, consider breaking them up`),r>.5*n&&n>5&&a.push("Too many short paragraphs, consider combining related ideas"),o>100&&a.push(`Average paragraph length (${Math.round(o)} words) is too long, aim for 40-80 words`);let l=100;return n>0&&(l-=Math.min(30,i/n*100)),n>5&&r>.5*n&&(l-=15),o>100&&(l-=Math.min(25,(o-100)/2)),{averageParagraphLength:o,longParagraphs:i,shortParagraphs:r,issues:a,score:l=Math.max(0,Math.min(100,l))}}analyzeListStructure(e){let t=e("ul, ol"),a=[],s=0;t.each((t,i)=>{let r=e(i).find("li");0===r.length&&(s++,a.push("Empty list found")),1===r.length&&(s++,a.push("List with only one item found, consider using a paragraph instead"));let n=0;r.each((t,a)=>{e(a).text().trim().split(/\s+/).filter(Boolean).length>50&&n++}),n>.5*r.length&&r.length>3&&(s++,a.push("List contains many long items, consider restructuring"))});let i=t.length,r=0===s,n=e("p"),o=0;n.each((t,a)=>{let s=e(a).text().trim();if(/^\d+\.\s/.test(s)&&t>0){let a=e(n[t-1]).text().trim();/^\d+\.\s/.test(a)&&o++}}),o>0&&a.push(`${o} manually numbered paragraphs found, consider using proper ordered lists (<ol>)`);let l=100;return i>0&&(l-=Math.min(50,s/i*100)),o>0&&(l-=Math.min(30,10*o)),{listCount:i,properlyFormatted:r,issues:a,score:l=Math.max(0,Math.min(100,l))}}analyzeSectionStructure(e){let t=e('section, article, div[class*="section"], div[id*="section"]'),a=[],s=0;t.each((t,i)=>{let r=e(i).find("h1, h2, h3, h4, h5, h6").length>0,n=e(i).find("p, ul, ol, table, img").length>0;!r&&n&&(s++,a.push("Section without heading found")),r&&!n&&(s++,a.push("Heading without content found"))});let i=t.length,r=0===s,n=e("body > p").length;n>3&&i>0&&a.push(`${n} paragraphs found outside of sections, consider organizing content better`);let o=100;return i>0&&(o-=Math.min(50,s/i*100)),n>3&&i>0&&(o-=Math.min(30,5*n)),{sectionCount:i,wellStructured:r,issues:a,score:o=Math.max(0,Math.min(100,o))}}analyzeContentOrganization(e){let t=[],a=e("p").first(),s=a.length>0&&a.text().trim().length>50;s||t.push("No clear introduction found, consider adding one");let i=e("p").last(),r=i.length>0&&i.text().trim().length>50&&i.text()!==a.text();r||t.push("No clear conclusion found, consider adding one");let n=e("p"),o=0,l=["additionally","consequently","furthermore","however","moreover","nevertheless","therefore","thus","in conclusion","in summary","first","second","third","finally","lastly","next","then","in addition","as a result","for example","for instance","in contrast","on the other hand","similarly","in fact"];n.each((t,a)=>{let s=e(a).text().toLowerCase();for(let e of l)if(s.includes(e)){o++;break}});let c=!(n.length>3)||o>=.25*n.length;!c&&n.length>3&&t.push("Few transition words found, consider improving content flow");let u=100;return s||(u-=25),r||(u-=25),!c&&n.length>3&&(u-=20),{hasIntroduction:s,hasConclusion:r,logicalFlow:c,issues:t,score:u=Math.max(0,Math.min(100,u))}}calculateOverallScore(e){let t=e.reduce((e,t)=>e+t.weight,0);return Math.round(e.reduce((e,t)=>e+t.score*t.weight,0)/t)}}class c extends r.Y{constructor(){super(),this.readabilityAnalyzer=new n,this.grammarAnalyzer=new o,this.structureAnalyzer=new l}async analyze(e){try{let t=(await s.A.get(e,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"},timeout:3e4})).data,a=i.Hh(t),r=this.extractMainContent(a),n=this.readabilityAnalyzer.analyze(r),o=this.grammarAnalyzer.analyze(r),l=this.structureAnalyzer.analyze(t),c=this.analyzeContentRelevance(a),u=this.analyzeContentFreshness(a),h=this.analyzeContentEngagement(a),d=this.calculateWeightedScore([{score:n.score,weight:2},{score:o.score,weight:1.5},{score:l.score,weight:2},{score:c.score,weight:1.5},{score:u.score,weight:1},{score:h.score,weight:1}]),m=[...n.issues,...o.issues,...l.issues,...c.issues,...u.issues,...h.issues];return{score:d,readability:n,grammar:o,structure:l,relevance:c,freshness:u,engagement:h,issues:m}}catch(e){throw console.error("Error in content quality analysis:",e),Error(`Content quality analysis failed: ${e.message}`)}}extractMainContent(e){let t=null;for(let a of["main","article","#content",".content","#main",".main",".post-content",".entry-content",".article-content"]){let s=e(a);if(s.length>0){t=s;break}}return t&&0!==t.length||(t=e("body")),t.find("nav, header, footer, aside, script, style, .comments, #comments, .sidebar, .widget, .ad, .advertisement").remove(),t.text().trim()}analyzeContentRelevance(e){return{keywordDensity:2.5,topicConsistency:!0,issues:[],score:85}}analyzeContentFreshness(e){let t=null;for(let a of['meta[property="article:published_time"]',"time[datetime]",".published-date",".post-date",".entry-date",".date"]){let s=e(a);if(s.length>0){let e=s.attr("content")||s.attr("datetime")||s.text();if(e){let a=new Date(e);if(!isNaN(a.getTime())){t=a;break}}}}let a=null;for(let t of['meta[property="article:modified_time"]',".updated-date",".modified-date",".update-date"]){let s=e(t);if(s.length>0){let e=s.attr("content")||s.attr("datetime")||s.text();if(e){let t=new Date(e);if(!isNaN(t.getTime())){a=t;break}}}}let s=null!==t,i=null!==a,r=new Date,n=new Date(r.getFullYear()-1,r.getMonth(),r.getDate()),o=a||t,l=!!o&&o>n,c=[];s||c.push("No publish date found, consider adding one for better user experience"),!l&&o&&c.push("Content may be outdated (older than one year), consider updating");let u=100;return s||(u-=20),!l&&o&&(u-=30),i||!s||l||(u-=15),{hasPublishDate:s,hasUpdateDate:i,isRecent:l,issues:c,score:u=Math.max(0,Math.min(100,u))}}analyzeContentEngagement(e){let t=e("img").filter((t,a)=>{let s=e(a).attr("src");e(a).attr("alt");let i=e(a).attr("width"),r=e(a).attr("height");return s&&(!i||parseInt(i)>100)&&(!r||parseInt(r)>100)}),a=e('video, iframe[src*="youtube"], iframe[src*="vimeo"], iframe[src*="wistia"], .video-container'),s=e('button, .button, [role="button"], details, summary, .accordion, .tabs, .interactive, [data-interactive], form, input, select, textarea'),i=t.length>0,r=a.length>0,n=s.length>0,o=t.length+a.length,l=[];if(i||r||l.push("No visual media found, consider adding images or videos to improve engagement"),t.length>0){let t=e("img").filter((t,a)=>{let s=e(a).attr("alt");return!s||""===s.trim()});t.length>0&&l.push(`${t.length} image${1!==t.length?"s":""} missing alt text, add for accessibility`)}let c=e("p").text().length,u=c>0?1e3*o/c:0;c>3e3&&u<1&&l.push("Low media density for long content, consider adding more visual elements");let h=70;return i&&(h+=10),r&&(h+=10),n&&(h+=10),c>1e3&&(u>=2?h+=10:u>=1?h+=5:u<.5&&(h-=10)),h-=5*l.length,{hasImages:i,hasVideos:r,hasInteractiveElements:n,mediaCount:o,issues:l,score:h=Math.max(0,Math.min(100,h))}}}},25602:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{w:()=>o});var i=a(83636),r=a(16809),n=e([i]);i=(n.then?(await n)():n)[0];class o extends r.Y{async analyze(e){try{let t=await i.default.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]}),a=await t.newPage();await a.setViewport({width:1280,height:800}),await a.goto(e,{waitUntil:"networkidle2",timeout:3e4}),await a.waitForTimeout(5e3);let s=await a.evaluate(()=>{let e=Array.from(document.querySelectorAll("iframe")).filter(e=>{let t=e.src||"";return t.includes("chat")||t.includes("bot")||t.includes("intercom")||t.includes("drift")||t.includes("zendesk")||t.includes("crisp")||t.includes("tawk")||t.includes("freshchat")||t.includes("hubspot")||t.includes("olark")||t.includes("liveperson")||t.includes("tidio")||t.includes("messenger")||t.includes("whatsapp")}),t=Array.from(document.querySelectorAll("script")).filter(e=>{let t=e.src||"",a=e.textContent||"";return t.includes("chat")||t.includes("bot")||t.includes("intercom")||t.includes("drift")||t.includes("zendesk")||t.includes("crisp")||t.includes("tawk")||t.includes("freshchat")||t.includes("hubspot")||t.includes("olark")||t.includes("liveperson")||t.includes("tidio")||t.includes("messenger")||t.includes("whatsapp")||a.includes("chatbot")||a.includes("livechat")||a.includes("intercom")||a.includes("drift")||a.includes("zendesk")||a.includes("crisp")||a.includes("tawk")||a.includes("freshchat")||a.includes("hubspot")||a.includes("olark")||a.includes("liveperson")||a.includes("tidio")}),a=[];for(let e of['[class*="chat-widget"]','[class*="chatbot"]','[class*="chat-bot"]','[class*="livechat"]','[class*="live-chat"]','[id*="chat-widget"]','[id*="chatbot"]','[id*="chat-bot"]','[id*="livechat"]','[id*="live-chat"]',".intercom-launcher","#intercom-container",'[class*="intercom"]',"#drift-widget",".drift-widget-controller",'[class*="drift"]',".zEWidget-launcher","#launcher",'[class*="zopim"]','[class*="zendesk"]',".crisp-client","#crisp-chatbox","#tawkchat-container",".tawk-min-container","#freshchat-container",".fc-widget-container","#hubspot-messages-iframe-container",".hs-chat-widget","#olark-container",".olark-launch-button","#LP_DIV_1",'[class*="lp-chat"]',"#tidio-chat",".tidio-chat-container",".fb-customerchat",".fb-messenger-checkbox",'[class*="whatsapp-chat"]','[class*="whatsapp-widget"]','[class*="chat-button"]','[class*="chat-icon"]','[class*="chat-bubble"]','[class*="chat-toggle"]','[class*="support-button"]','[class*="help-button"]','[class*="ai-chat"]','[class*="ai-assistant"]','[class*="chatgpt"]','[class*="bot-widget"]'])try{let t=document.querySelectorAll(e);for(let s of Array.from(t)){let t=s.getBoundingClientRect(),i=t.width>0&&t.height>0;(i||0===t.width&&0===t.height&&"none"!==window.getComputedStyle(s).display)&&a.push({selector:e,visible:i,rect:{width:t.width,height:t.height,top:t.top,left:t.left,bottom:t.bottom,right:t.right}})}}catch(e){}let s=document.body.textContent||"",i=["chat with us","live chat","chat now","start chat","chat support","chat with support","chat with an agent","chat with a representative","virtual assistant","ai assistant","chatbot","chat bot","message us"].filter(e=>s.toLowerCase().includes(e.toLowerCase()));return{chatbotElements:a,chatIframes:e.length,chatbotScripts:t.length,foundKeywords:i}}),r="none",n="unknown",o="unknown",l=!1,c=s.chatbotElements.length>0||s.chatIframes>0||s.chatbotScripts>0;if(c){let e=[{pattern:"intercom",provider:"Intercom"},{pattern:"drift",provider:"Drift"},{pattern:"zendesk",provider:"Zendesk Chat"},{pattern:"zopim",provider:"Zendesk Chat (Zopim)"},{pattern:"crisp",provider:"Crisp"},{pattern:"tawk",provider:"Tawk.to"},{pattern:"freshchat",provider:"Freshchat"},{pattern:"hubspot",provider:"HubSpot Chat"},{pattern:"olark",provider:"Olark"},{pattern:"liveperson",provider:"LivePerson"},{pattern:"tidio",provider:"Tidio"},{pattern:"messenger",provider:"Facebook Messenger"},{pattern:"whatsapp",provider:"WhatsApp"},{pattern:"chatgpt",provider:"ChatGPT/OpenAI"},{pattern:"ai-chat",provider:"AI Chatbot"}];for(let t of s.chatbotElements){for(let{pattern:a,provider:s}of e)if(t.selector.toLowerCase().includes(a)){n=s;break}if("unknown"!==n)break}let t=s.chatbotElements.filter(e=>e.visible);if(t.length>0){l=!0;let{left:e,right:s,top:i,bottom:r}=t.reduce((e,t)=>{let a=e.rect.width*e.rect.height;return t.rect.width*t.rect.height>a?t:e},t[0]).rect,n=a.viewport()?.width||1280,c=a.viewport()?.height||800;o=s<=.33*n?"left":e>=.67*n?"right":"center",r<=.33*c?o=`top-${o}`:i>=.67*c&&(o=`bottom-${o}`)}r=n.includes("AI")||n.includes("ChatGPT")?"ai":"traditional"}let u=await a.screenshot({encoding:"base64"});await t.close();let h=[],d=[];c?l||(h.push("Chatbot is not visible on page load"),d.push("Make the chatbot more visible or add a prominent chat button")):(h.push("No chatbot integration detected"),d.push("Consider adding a chatbot to improve user engagement and support")),"traditional"===r&&d.push("Consider upgrading to an AI-powered chatbot for better user experience");let m=0;return c&&(m+=70,l&&(m+=15),"ai"===r&&(m+=15)),{score:m=Math.max(0,Math.min(100,m)),hasChatbot:c,chatbotType:r,chatbotProvider:n,chatbotPosition:o,chatbotVisibility:l,detectedElements:s.chatbotElements.length,detectedIframes:s.chatIframes,detectedScripts:s.chatbotScripts,keywordMatches:s.foundKeywords,screenshot:u,issues:h,recommendations:d}}catch(e){throw console.error("Error in chatbot integration analysis:",e),Error(`Chatbot integration analysis failed: ${e.message}`)}}}s()}catch(e){s(e)}})},36600:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{K:()=>g});var i=a(74595),r=a(71554),n=a(62997),o=a(3687),l=a(67623),c=a(22852),u=a(18292),h=a(15651),d=a(25602),m=e([n,o,l,h,d]);[n,o,l,h,d]=m.then?(await m)():m;class g{constructor(e){this.prisma=e}async runAudit(e,t,a=["SEO","PERFORMANCE","ACCESSIBILITY","SECURITY","MOBILE","CONTENT","CROSS_BROWSER","ANALYTICS","CHATBOT"]){let s=this.calculateTotalSteps(a),m=new i.N(this.prisma,e,s);await m.initialize();let g=0,p={url:t,score:0,categories:a,timestamp:new Date().toISOString()};try{if(a.includes("SEO")){g++,await m.updateProgress("SEO",g,"Analyzing SEO...");let a=new r.s;p.seo=await a.analyze(t),await this.saveCategoryResults(e,"SEO",p.seo)}if(a.includes("PERFORMANCE")){g++,await m.updateProgress("PERFORMANCE",g,"Analyzing performance...");let a=new n.j;p.performance=await a.analyze(t),await this.saveCategoryResults(e,"PERFORMANCE",p.performance)}if(a.includes("ACCESSIBILITY")){g++,await m.updateProgress("ACCESSIBILITY",g,"Analyzing accessibility...");let a=new o.t;p.accessibility=await a.analyze(t),await this.saveCategoryResults(e,"ACCESSIBILITY",p.accessibility)}if(a.includes("MOBILE")){g++,await m.updateProgress("MOBILE",g,"Analyzing mobile UX...");let a=new l.R;p.mobile=await a.analyze(t),await this.saveCategoryResults(e,"MOBILE",p.mobile)}if(a.includes("CONTENT")){g++,await m.updateProgress("CONTENT",g,"Analyzing content quality...");let a=new c.Y;p.content=await a.analyze(t),await this.saveCategoryResults(e,"CONTENT",p.content)}if(a.includes("CROSS_BROWSER")){g++,await m.updateProgress("CROSS_BROWSER",g,"Analyzing cross-browser compatibility...");let a=new u.n;p.crossBrowser=await a.analyze(t),await this.saveCategoryResults(e,"CROSS_BROWSER",p.crossBrowser)}if(a.includes("ANALYTICS")){g++,await m.updateProgress("ANALYTICS",g,"Analyzing analytics integration...");let a=new h.r;p.analytics=await a.analyze(t),await this.saveCategoryResults(e,"ANALYTICS",p.analytics)}if(a.includes("CHATBOT")){g++,await m.updateProgress("CHATBOT",g,"Analyzing chatbot integration...");let a=new d.w;p.chatbot=await a.analyze(t),await this.saveCategoryResults(e,"CHATBOT",p.chatbot)}return p.score=this.calculateOverallScore(p),await this.saveOverallResults(e,p),await m.complete(!0,"Audit completed successfully"),p}catch(e){throw console.error("Error in audit orchestration:",e),await m.fail(e),e}}calculateTotalSteps(e){return e.length}calculateOverallScore(e){let t={seo:1.5,performance:1.5,accessibility:1.2,security:1.5,mobile:1.2,content:1,crossBrowser:1,analytics:.8,chatbot:.5},a=0,s=0;return e.seo&&(a+=e.seo.score*t.seo,s+=t.seo),e.performance&&(a+=e.performance.score*t.performance,s+=t.performance),e.accessibility&&(a+=e.accessibility.score*t.accessibility,s+=t.accessibility),e.security&&(a+=e.security.score*t.security,s+=t.security),e.mobile&&(a+=e.mobile.score*t.mobile,s+=t.mobile),e.content&&(a+=e.content.score*t.content,s+=t.content),e.crossBrowser&&(a+=e.crossBrowser.score*t.crossBrowser,s+=t.crossBrowser),e.analytics&&(a+=e.analytics.score*t.analytics,s+=t.analytics),e.chatbot&&(a+=e.chatbot.score*t.chatbot,s+=t.chatbot),s>0?Math.round(a/s*10)/10:0}async saveCategoryResults(e,t,a){try{let s=`${t.toLowerCase()}Score`;if(await this.prisma.audit.update({where:{id:e},data:{[s]:a.score}}),await this.prisma.auditResult.create({data:{auditId:e,category:t,score:a.score,details:a}}),a.issues&&Array.isArray(a.issues)){let s=a.issues.map(a=>({auditId:e,category:t,description:a,severity:this.determineSeverity(a)}));s.length>0&&await this.prisma.auditIssue.createMany({data:s})}}catch(e){console.error(`Error saving ${t} results:`,e)}}async saveOverallResults(e,t){try{await this.prisma.audit.update({where:{id:e},data:{overallScore:t.score,status:"completed",completedAt:new Date}}),await this.prisma.auditSummary.create({data:{auditId:e,overallScore:t.score,totalIssues:await this.countTotalIssues(e),criticalIssues:await this.countIssuesBySeverity(e,"CRITICAL"),majorIssues:await this.countIssuesBySeverity(e,"MAJOR"),minorIssues:await this.countIssuesBySeverity(e,"MINOR"),categories:t.categories,timestamp:new Date}})}catch(e){console.error("Error saving overall results:",e)}}async countTotalIssues(e){return this.prisma.auditIssue.count({where:{auditId:e}})}async countIssuesBySeverity(e,t){return this.prisma.auditIssue.count({where:{auditId:e,severity:t}})}determineSeverity(e){let t=e.toLowerCase();return t.includes("critical")||t.includes("severe")||t.includes("security")||t.includes("vulnerability")||t.includes("breach")||t.includes("broken")||t.includes("missing ssl")||t.includes("missing https")?"CRITICAL":t.includes("major")||t.includes("important")||t.includes("significant")||t.includes("performance")||t.includes("slow")||t.includes("accessibility")||t.includes("mobile")||t.includes("seo")?"MAJOR":"MINOR"}async getAuditResult(e){try{let t=await this.prisma.audit.findUnique({where:{id:e}});if(!t)return null;let a=await this.prisma.auditResult.findMany({where:{auditId:e}}),s={url:t.url,score:t.overallScore||0,categories:t.categories,timestamp:t.completedAt?.toISOString()||t.createdAt.toISOString(),summary:{totalIssues:0,criticalIssues:0,majorIssues:0,minorIssues:0,recommendations:[]}};for(let e of a)s[e.category.toLowerCase()]=e.details;return s}catch(e){return console.error("Error getting audit result:",e),null}}}s()}catch(e){s(e)}})},50456:(e,t,a)=>{a.r(t),a.d(t,{applyMocks:()=>l,mockDocument:()=>r,mockNavigator:()=>n,mockSelf:()=>o,mockWindow:()=>i});class s{alert(){}confirm(){return!0}prompt(){return null}close(){}focus(){}blur(){}open(){return null}setTimeout(e){return 0}clearTimeout(e){}setInterval(e){return 0}clearInterval(e){}requestAnimationFrame(e){return 0}cancelAnimationFrame(e){}getComputedStyle(){return{}}matchMedia(e){return{matches:!1,media:"",onchange:null}}fetch(){return Promise.reject(Error("Not implemented"))}btoa(e){return Buffer.from(e).toString("base64")}atob(e){return Buffer.from(e,"base64").toString()}addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}scrollTo(){}scrollBy(){}getSelection(){return null}constructor(){this.innerHeight=1080,this.innerWidth=1920,this.outerHeight=1080,this.outerWidth=1920,this.pageXOffset=0,this.pageYOffset=0,this.screenX=0,this.screenY=0,this.screenLeft=0,this.screenTop=0,this.scrollX=0,this.scrollY=0,this.name="",this.status="",this.closed=!1,this.length=0,this.opener=null,this.parent=this,this.self=this,this.top=this,this.window=this,this.frames=this,this.localStorage={getItem:e=>null,setItem:(e,t)=>{},removeItem:e=>{},clear:()=>{},key:e=>null,length:0},this.sessionStorage=this.localStorage,this.performance={now:()=>Date.now(),mark:()=>{},measure:()=>{},getEntriesByName:()=>[],getEntriesByType:()=>[],getEntries:()=>[],clearMarks:()=>{},clearMeasures:()=>{},timeOrigin:Date.now(),timing:{navigationStart:Date.now(),loadEventEnd:Date.now()+1e3},navigation:{type:0,redirectCount:0},onresourcetimingbufferfull:null,clearResourceTimings:()=>{},setResourceTimingBufferSize:()=>{},toJSON:()=>({})},this.JSErrors=[],this.location={href:"https://example.com",hostname:"example.com",protocol:"https:",host:"example.com",pathname:"/",search:"",hash:"",origin:"https://example.com",port:"",assign:e=>{},reload:()=>{},replace:e=>{},toString:()=>"https://example.com",ancestorOrigins:{length:0,item:()=>null,contains:()=>!1}},this.navigator={userAgent:"MockBrowser/1.0",language:"en-US",languages:["en-US","en"],platform:"MockOS",onLine:!0,cookieEnabled:!0,doNotTrack:null,hardwareConcurrency:8,maxTouchPoints:0,vendor:"Mock",appName:"MockBrowser",appVersion:"1.0",product:"MockGecko",productSub:"20030107",userAgentData:void 0,sendBeacon:()=>!0,javaEnabled:()=>!1,vibrate:()=>!1,addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!0},this.document={createElement:()=>({style:{},setAttribute:()=>{},getAttribute:()=>null,appendChild:()=>{},removeChild:()=>{},addEventListener:()=>{},removeEventListener:()=>{},getBoundingClientRect:()=>({top:0,left:0,bottom:0,right:0,width:0,height:0})}),createTextNode:()=>({}),querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,getElementsByClassName:()=>[],getElementsByTagName:()=>[],documentElement:{style:{},clientWidth:1920,clientHeight:1080},head:{appendChild:()=>{}},body:{appendChild:()=>{}},location:this.location,title:"Mock Document",referrer:"",cookie:"",readyState:"complete",addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!0}}}let i=new s,r=i.document,n=i.navigator,o=i.self;function l(){"undefined"!=typeof global&&(void 0===global.window&&(global.window=i),void 0===global.self&&(global.self=global.window),void 0===global.self&&(global.self=global.window),void 0===global.globalThis&&(global.globalThis=global.window),void 0===global.document&&(global.document=r),void 0===global.navigator&&(global.navigator=n))}"undefined"!=typeof global&&(global.window=i,global.document=r,global.navigator=n,global.self=i,global.self=global.window,global.globalThis=i),l()},62997:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{j:()=>c});var i=a(83636),r=a(22316),n=a.n(r),o=a(16809),l=e([i]);i=(l.then?(await l)():l)[0];class c extends o.Y{async analyze(e){try{let t=await i.default.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]}),a=await t.newPage();await a.target().createCDPSession();let{lhr:s}=await n()(e,{port:new URL(t.wsEndpoint()).port,output:"json",logLevel:"error",onlyCategories:["performance"]}),r=this.extractCoreWebVitals(s),o=this.extractPerformanceMetrics(s),l=this.extractOpportunities(s),c=this.extractDiagnostics(s);return await t.close(),{score:Math.round(100*s.categories.performance.score),coreWebVitals:r,metrics:o,opportunities:l,diagnostics:c}}catch(e){throw console.error("Error in performance analysis:",e),Error(`Performance analysis failed: ${e.message}`)}}extractCoreWebVitals(e){let t=e.audits["largest-contentful-paint"],a=e.audits["max-potential-fid"]||e.audits["total-blocking-time"],s=e.audits["cumulative-layout-shift"],i=e.audits["server-response-time"],r=e.audits.interactive;return{lcp:{value:t?.numericValue||0,unit:"ms",score:Math.round(100*(t?.score||0))},fid:{value:a?.numericValue||0,unit:"ms",score:Math.round(100*(a?.score||0))},cls:{value:s?.numericValue||0,unit:"",score:Math.round(100*(s?.score||0))},ttfb:{value:i?.numericValue||0,unit:"ms",score:Math.round(100*(i?.score||0))},inp:{value:r?.numericValue||0,unit:"ms",score:Math.round(100*(r?.score||0))}}}extractPerformanceMetrics(e){let t=e.audits["first-contentful-paint"],a=e.audits["speed-index"],s=e.audits.interactive,i=e.audits["total-blocking-time"];return{firstContentfulPaint:{value:t?.numericValue||0,unit:"ms",score:Math.round(100*(t?.score||0))},speedIndex:{value:a?.numericValue||0,unit:"ms",score:Math.round(100*(a?.score||0))},timeToInteractive:{value:s?.numericValue||0,unit:"ms",score:Math.round(100*(s?.score||0))},totalBlockingTime:{value:i?.numericValue||0,unit:"ms",score:Math.round(100*(i?.score||0))}}}extractOpportunities(e){let t=e.audits["uses-responsive-images"]||e.audits["uses-optimized-images"],a=e.audits["render-blocking-resources"],s=e.audits["unused-css-rules"],i=e.audits["unused-javascript"],r=e.audits["uses-text-compression"];return{properImageSizing:{wastedBytes:t?.details?.overallSavingsBytes,items:(t?.details?.items||[]).map(e=>({url:e.url,wastedBytes:e.wastedBytes,totalBytes:e.totalBytes}))},renderBlockingResources:{wastedMs:a?.details?.overallSavingsMs,items:(a?.details?.items||[]).map(e=>({url:e.url,wastedMs:e.wastedMs}))},unusedCss:{wastedBytes:s?.details?.overallSavingsBytes,items:(s?.details?.items||[]).map(e=>({url:e.url,wastedBytes:e.wastedBytes,totalBytes:e.totalBytes}))},unusedJavaScript:{wastedBytes:i?.details?.overallSavingsBytes,items:(i?.details?.items||[]).map(e=>({url:e.url,wastedBytes:e.wastedBytes,totalBytes:e.totalBytes}))},textCompression:{wastedBytes:r?.details?.overallSavingsBytes,items:(r?.details?.items||[]).map(e=>({url:e.url,wastedBytes:e.wastedBytes,totalBytes:e.totalBytes}))}}}extractDiagnostics(e){let t=e.audits["mainthread-work-breakdown"],a=e.audits["bootup-time"],s=e.audits["network-requests"],i=e.audits["network-rtt"],r=e.audits["total-byte-weight"],n=e.audits["dom-size"];return{mainThreadWork:{value:t?.numericValue||0,unit:"ms"},bootupTime:{value:a?.numericValue||0,unit:"ms"},networkRequests:{value:(s?.details?.items||[]).length},networkRtt:{value:i?.numericValue||0,unit:"ms"},totalByteWeight:{value:r?.numericValue||0,unit:"bytes"},domSize:{value:n?.numericValue||0,unit:"elements"}}}}s()}catch(e){s(e)}})},67623:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{R:()=>o});var i=a(83636),r=a(16809),n=e([i]);i=(n.then?(await n)():n)[0];class o extends r.Y{async analyze(e){try{let t=await i.default.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]}),a=await t.newPage();await a.setViewport({width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0}),await a.setUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1"),await a.goto(e,{waitUntil:"networkidle2",timeout:3e4});let s=await this.analyzeViewport(a),r=await this.analyzeTouchTargets(a),n=await this.analyzeFontSizes(a),o=await this.analyzeTapableElements(a),l=await this.analyzeResponsiveDesign(t,e),c=this.calculateWeightedScore([{score:s.score,weight:1.5},{score:r.score,weight:2},{score:n.score,weight:1.5},{score:o.score,weight:1.5},{score:l.score,weight:2}]);return await t.close(),{score:c,viewport:s,touchTargets:r,fontSizes:n,tapableElements:o,responsiveDesign:l}}catch(e){throw console.error("Error in mobile UX analysis:",e),Error(`Mobile UX analysis failed: ${e.message}`)}}async analyzeViewport(e){let t=await e.evaluate(()=>{let e=document.querySelector('meta[name="viewport"]');return e?e.getAttribute("content"):null}),a=!!t,s=[];a||s.push("Missing viewport meta tag");let i=!1;if(a){let e=t?.includes("width=device-width"),a=t?.includes("initial-scale=1");i=e&&a,e||s.push("Viewport meta tag missing width=device-width"),a||s.push("Viewport meta tag missing initial-scale=1"),(t?.includes("user-scalable=no")||t?.includes("maximum-scale=1"))&&s.push("Viewport prevents zooming, which harms accessibility")}let r=a?i?100:60:0;return{hasViewport:a,isConfigured:i,content:t||void 0,issues:s,score:r}}async analyzeTouchTargets(e){let t=await e.evaluate(()=>Array.from(document.querySelectorAll('a, button, input, select, textarea, [role="button"], [role="link"]')).map(e=>{let t=e.getBoundingClientRect(),a=t.width,s=t.height;return{element:e.tagName.toLowerCase()+(e.id?`#${e.id}`:""),size:{width:a,height:s},isAdequate:a>=44&&s>=44}})),a=t.filter(e=>e.isAdequate).length,s=t.filter(e=>!e.isAdequate).length,i=[];s>0&&i.push(`${s} interactive elements have touch targets smaller than 44x44 pixels`);let r=t.length,n=r>0?Math.round(a/r*100):100;return{adequateTargets:a,inadequateTargets:s,targetDetails:t,issues:i,score:n}}async analyzeFontSizes(e){let t=await e.evaluate(()=>Array.from(document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, a, li, td, th, label, button, input, textarea")).filter(e=>{let t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity&&e.textContent?.trim().length>0}).map(e=>{let t=window.getComputedStyle(e),a=parseFloat(t.fontSize);return{element:e.tagName.toLowerCase()+(e.id?`#${e.id}`:""),size:a,isAdequate:a>=16}})),a=t.filter(e=>e.isAdequate).length,s=t.filter(e=>!e.isAdequate).length,i=[];s>0&&i.push(`${s} text elements have font size smaller than 16px`);let r=t.length,n=r>0?Math.round(a/r*100):100;return{adequateFonts:a,smallFonts:s,fontDetails:t,issues:i,score:n}}async analyzeTapableElements(e){let t=await e.evaluate(()=>{let e=Array.from(document.querySelectorAll('a, button, input, select, textarea, [role="button"], [role="link"]')),t=[];for(let a=0;a<e.length;a++){let s=e[a],i=s.getBoundingClientRect(),r=1/0,n=!0;for(let t=0;t<e.length;t++){let s;if(a===t)continue;let o=e[t].getBoundingClientRect(),l=Math.max(0,Math.min(Math.abs(i.left-o.right),Math.abs(o.left-i.right))),c=Math.max(0,Math.min(Math.abs(i.top-o.bottom),Math.abs(o.top-i.bottom)));(s=0===l&&0===c?0:0===l?c:0===c?l:Math.sqrt(l*l+c*c))<r&&(r=s),s<8&&(n=!1)}r!==1/0&&t.push({element:s.tagName.toLowerCase()+(s.id?`#${s.id}`:""),spacing:r,isAdequate:n})}return t}),a=t.filter(e=>e.isAdequate).length,s=t.filter(e=>!e.isAdequate).length,i=[];s>0&&i.push(`${s} interactive elements have inadequate spacing (less than 8px)`);let r=t.length,n=r>0?Math.round(a/r*100):100;return{adequateSpacing:a,inadequateSpacing:s,elementDetails:t,issues:i,score:n}}async analyzeResponsiveDesign(e,t){let a=[],s=[];for(let i of[{width:375,height:667},{width:414,height:896},{width:768,height:1024},{width:1024,height:768},{width:1440,height:900}]){let r=await e.newPage();await r.setViewport(i);try{await r.goto(t,{waitUntil:"networkidle2",timeout:3e4});let e=await r.evaluate(()=>document.documentElement.scrollWidth>document.documentElement.clientWidth),n=await r.evaluate(()=>{let e=Array.from(document.querySelectorAll("*")),t=window.innerWidth;for(let a of e)if(a.getBoundingClientRect().right>t+5)return!0;return!1}),o=[];e&&o.push("Horizontal scrolling detected"),n&&o.push("Elements extend beyond viewport"),a.push({width:i.width,issues:o}),o.length>0&&s.push(`Issues at ${i.width}px: ${o.join(", ")}`),await r.close()}catch(e){await r.close(),console.error(`Error testing breakpoint ${i.width}px:`,e),a.push({width:i.width,issues:[`Error: ${e.message}`]})}}let i=await e.newPage();await i.goto(t,{waitUntil:"networkidle2",timeout:3e4});let r=await i.evaluate(()=>{let e=0;for(let t of document.styleSheets)try{if(t.href&&!t.href.startsWith(window.location.origin))continue;let a=t.cssRules||t.rules;for(let t=0;t<a.length;t++)a[t].type===CSSRule.MEDIA_RULE&&e++}catch(e){}return e});await i.close();let n=r>0&&a.filter(e=>0===e.issues.length).length>=3;!n&&(0===r&&s.push("No media queries detected, site may not be responsive"),a.filter(e=>0===e.issues.length).length<3&&s.push("Site has issues at multiple breakpoints"));let o=a.length,l=a.filter(e=>0===e.issues.length).length,c=Math.round(l/o*70+30*(r>0));return{isResponsive:n,breakpoints:a,mediaQueries:r,issues:s,score:c}}}s()}catch(e){s(e)}})},71554:(e,t,a)=>{a.d(t,{s:()=>u});var s=a(18343),i=a(6156),r=a(16809);class n{analyze(e){let t=[],a=e("title").text().trim(),s=a.length>0,i=a.length;s?i<10?t.push("Title is too short (less than 10 characters)"):i>60&&t.push("Title is too long (more than 60 characters)"):t.push("Missing page title");let r=e('meta[name="description"]').attr("content")||"",n=r.length>0,o=r.length;n?o<50?t.push("Meta description is too short (less than 50 characters)"):o>160&&t.push("Meta description is too long (more than 160 characters)"):t.push("Missing meta description");let l=e('meta[name="robots"]').attr("content")||"",c=l.length>0;c&&(l.includes("noindex")||l.includes("none"))&&t.push("Page is set to noindex, which prevents search engines from indexing it");let u=e('meta[name="viewport"]').attr("content")||"",h=u.length>0;h||t.push("Missing viewport meta tag for responsive design");let d=e('link[rel="canonical"]').attr("href")||"",m=d.length>0;m||t.push("Missing canonical URL tag");let g=Math.max(0,100-20*t.length);return{title:{exists:s,length:i,content:a,issues:s?[]:["Missing page title"]},description:{exists:n,length:o,content:r,issues:n?[]:["Missing meta description"]},robots:{exists:c,content:l,issues:c&&(l.includes("noindex")||l.includes("none"))?["Page is set to noindex"]:[]},viewport:{exists:h,content:u,issues:h?[]:["Missing viewport meta tag"]},canonical:{exists:m,content:d,issues:m?[]:["Missing canonical URL tag"]},score:g,issues:t}}}class o{analyze(e){let t=[],a=[],s=e("h1").length,i=e("h2").length,r=e("h3").length,n=e("h4").length,o=e("h5").length,l=e("h6").length;0===s?t.push("Missing H1 heading"):s>1&&t.push(`Multiple H1 headings (${s}) found - should have only one`),r>0&&0===i&&t.push("H3 headings found without H2 headings - improper hierarchy"),n>0&&0===r&&t.push("H4 headings found without H3 headings - improper hierarchy"),e("h1, h2, h3, h4, h5, h6").each((t,s)=>{let i=s.name,r=e(s).text().trim(),n=[];0===r.length?n.push("Empty heading"):r.length<3?n.push("Heading is too short"):("h1"===i&&r.length>70||"h2"===i&&r.length>60||"h3"===i&&r.length>50)&&n.push("Heading is too long"),a.filter(e=>e.type===i&&e.content.toLowerCase()===r.toLowerCase()).length>0&&n.push("Duplicate heading"),a.push({type:i,content:r,issues:n.length>0?n:void 0})});let c=1===s&&(0===r||i>0)&&(0===n||r>0)&&!a.some(e=>e.issues&&e.issues.length>0),u=Math.max(0,100-15*t.length);return{h1Count:s,h2Count:i,h3Count:r,h4Count:n,h5Count:o,h6Count:l,hasProperStructure:c,headings:a,issues:t,score:u}}}class l{analyze(e,t,a){let s,i=[],r=this.getTextContent(e),n=this.countWords(r),o=e("title").text().trim(),l=e('meta[name="description"]').attr("content")||"",c=e("h1").first().text().trim();a||(a=this.extractPrimaryKeyword(o,l,c));let u=!1,h=!1,d=!1,m=!1;if(a){let e=RegExp(this.escapeRegExp(a),"gi"),g=r.match(e)||[];s=n>0?g.length/n*100:0,u=o.toLowerCase().includes(a.toLowerCase()),h=l.toLowerCase().includes(a.toLowerCase()),d=c.toLowerCase().includes(a.toLowerCase()),m=t.toLowerCase().includes(a.toLowerCase()),u||i.push("Primary keyword not found in page title"),h||i.push("Primary keyword not found in meta description"),d||i.push("Primary keyword not found in H1 heading"),m||i.push("Primary keyword not found in URL"),s>3?i.push("Keyword density is too high (potential keyword stuffing)"):s<.5&&n>300&&i.push("Keyword density is too low")}else i.push("No primary keyword could be identified");let g=this.extractSecondaryKeywords(r,a),p=Math.max(0,100-15*i.length);return{primaryKeyword:a,primaryKeywordDensity:s,secondaryKeywords:g,titleContainsKeyword:u,descriptionContainsKeyword:h,h1ContainsKeyword:d,urlContainsKeyword:m,issues:i,score:p}}getTextContent(e){return e("script, style").remove(),e("body").text().replace(/\s+/g," ").trim()}countWords(e){return e.split(/\s+/).filter(Boolean).length}extractPrimaryKeyword(e,t,a){let s,i=`${e} ${t} ${a}`.toLowerCase(),r=["a","an","the","and","or","but","in","on","at","to","for","with","by","about","as","of","is","are","was","were"],n=i.split(/\s+/).filter(Boolean),o={};for(let e of n)e.length>2&&!r.includes(e)&&(o[e]=(o[e]||0)+1);let l=0;for(let[e,t]of Object.entries(o))t>l&&(l=t,s=e);return s}extractSecondaryKeywords(e,t){let a=["a","an","the","and","or","but","in","on","at","to","for","with","by","about","as","of","is","are","was","were"],s=e.toLowerCase().split(/\s+/).filter(Boolean),i=s.length,r={};for(let e of s)!(e.length>3)||a.includes(e)||t&&e===t.toLowerCase()||(r[e]=(r[e]||0)+1);return Object.entries(r).map(([e,t])=>({keyword:e,density:t/i*100})).sort((e,t)=>t.density-e.density).slice(0,5)}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}class c{analyze(e,t){let a=[],s=[],i=this.extractDomain(t),r=0,n=0,o=0;e("a[href]").each((a,l)=>{let c=e(l),u=c.attr("href")||"",h=c.text().trim(),d=c.attr("rel")||"";if(!u||u.startsWith("javascript:")||"#"===u)return;let m=this.normalizeUrl(u,t),g=this.isInternalLink(m,i),p=d.includes("nofollow");g?r++:n++,p&&o++,s.push({url:m,text:this.truncateString(h,50),isInternal:g,isNoFollow:p})}),0===r&&a.push("No internal links found"),0===n&&a.push("No external links found");let l=s.filter(e=>!e.text);l.length>0&&a.push(`${l.length} links have empty text`);let c={};for(let e of s)e.text&&(c[e.text]||(c[e.text]=new Set),c[e.text].add(e.url));let u=Object.entries(c).filter(([e,t])=>t.size>1).map(([e])=>e);u.length>0&&a.push(`${u.length} duplicate link texts pointing to different URLs`);let h=Math.max(0,100-15*a.length);return{internalLinks:r,externalLinks:n,brokenLinks:0,noFollowLinks:o,linkDetails:s,issues:a,score:h}}normalizeUrl(e,t){try{if(e.startsWith("/")){let a=new URL(t);return`${a.protocol}//${a.host}${e}`}if(e.startsWith("//")){let a=new URL(t);return`${a.protocol}${e}`}if(!e.includes("://")&&!e.startsWith("/")){let a=new URL(t),s=a.pathname.endsWith("/")?a.pathname:`${a.pathname}/`;return`${a.protocol}//${a.host}${s}${e}`}return e}catch(t){return e}}isInternalLink(e,t){try{let a=this.extractDomain(e);return a===t||""===a}catch(e){return!1}}extractDomain(e){try{return new URL(e).hostname}catch(e){return""}}truncateString(e,t){return e?e.length>t?`${e.substring(0,t)}...`:e:""}}class u extends r.Y{constructor(){super(),this.metaTagsAnalyzer=new n,this.headingStructureAnalyzer=new o,this.keywordAnalyzer=new l,this.linkAnalyzer=new c}async analyze(e,t){try{let a=(await i.A.get(e,{headers:{"User-Agent":"AutomatIQ-Website-Auditor/1.0"}})).data,r=s.Hh(a),n=this.metaTagsAnalyzer.analyze(r),o=this.headingStructureAnalyzer.analyze(r),l=this.keywordAnalyzer.analyze(r,e,t?.primaryKeyword),c=this.linkAnalyzer.analyze(r,e),u=this.placeholderImageAnalysis(),h=this.placeholderSchemaAnalysis(r),d=this.placeholderCanonicalAnalysis(r,e),m=this.placeholderSocialTagsAnalysis(r),g=this.placeholderIndexabilityAnalysis(r),p=this.placeholderTechnicalSEOAnalysis(e);return{score:this.calculateWeightedScore([{score:n.score,weight:1.5},{score:o.score,weight:1.2},{score:l.score,weight:1.5},{score:c.score,weight:1.2},{score:u.score,weight:1},{score:h.score,weight:1},{score:d.score,weight:1},{score:m.score,weight:.8},{score:g.score,weight:1.3},{score:p.score,weight:1.5}]),metaTags:n,headings:o,keywords:l,links:c,images:u,schema:h,canonicalization:d,socialTags:m,indexability:g,technicalSeo:p}}catch(e){throw console.error("Error in SEO analysis:",e),Error(`SEO analysis failed: ${e.message}`)}}placeholderImageAnalysis(){return{totalImages:0,missingAlt:0,largeImages:0,imageDetails:[],issues:["Image analysis not implemented yet"],score:50}}placeholderSchemaAnalysis(e){let t=e('script[type="application/ld+json"]').length>0;return{hasSchema:t,schemaTypes:t?["Unknown"]:[],isValid:t,issues:t?[]:["No schema markup found"],score:t?80:40}}placeholderCanonicalAnalysis(e,t){let a=e('link[rel="canonical"]').attr("href"),s=!!a;return{hasCanonical:s,canonicalUrl:a,isSelf:a===t,issues:s?[]:["Missing canonical URL"],score:s?100:50}}placeholderSocialTagsAnalysis(e){let t=e('meta[property^="og:"]').length>0,a=e('meta[name^="twitter:"]').length>0,s={};e('meta[property^="og:"]').each((t,a)=>{let i=e(a).attr("property")?.replace("og:","")||"",r=e(a).attr("content")||"";i&&r&&(s[i]=r)});let i={};e('meta[name^="twitter:"]').each((t,a)=>{let s=e(a).attr("name")?.replace("twitter:","")||"",r=e(a).attr("content")||"";s&&r&&(i[s]=r)});let r=[];return t||r.push("No Open Graph tags found"),a||r.push("No Twitter Card tags found"),{hasOpenGraph:t,hasTwitterCards:a,openGraphTags:s,twitterCardTags:i,issues:r,score:t&&a?100:t||a?70:40}}placeholderIndexabilityAnalysis(e){let t=e('meta[name="robots"]').attr("content")||"",a=t.includes("noindex");return{isIndexable:!a,robotsTxt:{exists:!0,content:"Not checked",blocks:!1},metaRobots:{exists:!!t,content:t,blocks:a},issues:a?["Page is set to noindex"]:[],score:a?50:100}}placeholderTechnicalSEOAnalysis(e){return{hasSitemap:!0,sitemapUrl:`${new URL(e).origin}/sitemap.xml`,hasStructuredData:!1,hasHreflang:!1,hasBreadcrumbs:!1,pageSpeed:{score:70,issues:["Page speed analysis not fully implemented"]},mobileCompatibility:{isCompatible:!0,issues:[]},issues:["Technical SEO analysis not fully implemented"],score:70}}}},74595:(e,t,a)=>{a.d(t,{N:()=>s});class s{constructor(e,t,a){this.completedSteps=0,this.status="running",this.currentCategory="",this.prisma=e,this.auditId=t,this.totalSteps=a,this.startTime=Date.now(),this.lastUpdateTime=this.startTime}async initialize(){await this.prisma.audit.update({where:{id:this.auditId},data:{status:"running",startedAt:new Date,progress:0}})}async updateProgress(e,t,a){this.completedSteps=t,this.currentCategory=e;let s=Math.min(Math.round(t/this.totalSteps*100),99),i=Date.now();(s%5==0||i-this.lastUpdateTime>5e3)&&(this.lastUpdateTime=i,await this.prisma.audit.update({where:{id:this.auditId},data:{progress:s,currentCategory:e,statusMessage:a}}),console.log(`Audit ${this.auditId} progress: ${s}% - ${e} - ${a}`))}async complete(e,t){let a=Date.now()-this.startTime;this.status=e?"completed":"failed",await this.prisma.audit.update({where:{id:this.auditId},data:{status:this.status,completedAt:new Date,progress:e?100:this.completedSteps/this.totalSteps*100,duration:Math.round(a/1e3),statusMessage:t||(e?"Audit completed successfully":"Audit failed")}}),console.log(`Audit ${this.auditId} ${this.status} in ${Math.round(a/1e3)}s - ${t||""}`)}async fail(e){await this.complete(!1,`Error: ${e.message}`)}getProgress(){return Math.round(this.completedSteps/this.totalSteps*100)}getStatus(){return this.status}getCurrentCategory(){return this.currentCategory}}}};