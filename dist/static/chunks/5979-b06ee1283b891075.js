"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{25979:(e,s,t)=>{t.d(s,{n:()=>v});var r=t(95155),a=t(12115),l=t(88482),i=t(97168),c=t(95139),d=t(95784),n=t(88145),o=t(41397),x=t(91788),m=t(51154),h=t(57434),u=t(64261),p=t(85339),g=t(34869),j=t(14503),f=t(49026),b=t(67133);function v(e){let{reports:s,onExportComplete:t}=e,[v,N]=(0,a.useState)([]),[w,y]=(0,a.useState)("pdf"),[k,E]=(0,a.useState)(!1),[C,S]=(0,a.useState)(0),[A,R]=(0,a.useState)(null),{toast:F}=(0,j.dj)(),D=e=>{N(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},_=async()=>{try{E(!0),S(0),R(null);let e=setInterval(()=>{S(e=>e<90?e+5:e)},500),s=await fetch("/api/export/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auditIds:v,format:w,options:{includeDetails:!0,includeSummary:!0,includeRecommendations:!0,includeBranding:!0}})});if(clearInterval(e),!s.ok){let e=await s.json();throw Error(e.error||"Failed to export reports")}S(100);let r=await s.blob(),a=URL.createObjectURL(r),l=document.createElement("a");l.href=a,l.download="audit-reports-".concat(Date.now(),".zip"),document.body.appendChild(l),l.click(),document.body.removeChild(l),F({title:"Export successful",description:"".concat(v.length," reports have been exported successfully"),variant:"default"}),t&&t()}catch(e){console.error("Export error:",e),R(e instanceof Error?e.message:"An unknown error occurred"),F({title:"Export failed",description:e instanceof Error?e.message:"Failed to export reports",variant:"destructive"})}finally{E(!1)}},I=e=>{switch(e){case"completed":return"bg-green-500/20 text-green-400 border-green-500/30";case"in-progress":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"failed":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return(0,r.jsxs)(l.Zp,{className:"glass-card border-white/10",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"text-white flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"w-5 h-5 text-blue-400"}),"Bulk Export"]}),(0,r.jsx)(l.BT,{className:"text-gray-300",children:"Export multiple reports at once"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-white text-sm font-medium mb-2 block",children:"Export Format"}),(0,r.jsxs)(d.l6,{value:w,onValueChange:y,children:[(0,r.jsx)(d.bq,{className:"neomorphism border-0 text-white",children:(0,r.jsx)(d.yv,{})}),(0,r.jsxs)(d.gC,{className:"bg-slate-800 border-white/10",children:[(0,r.jsx)(d.eb,{value:"pdf",children:"PDF Reports"}),(0,r.jsx)(d.eb,{value:"zip",children:"ZIP Archive"}),(0,r.jsx)(d.eb,{value:"csv",children:"CSV Data"}),(0,r.jsx)(d.eb,{value:"xlsx",children:"Excel Workbook"})]})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)(b.rI,{children:[(0,r.jsx)(b.ty,{asChild:!0,children:(0,r.jsxs)(i.$,{disabled:0===v.length||k,className:"w-full shimmer text-white font-semibold",children:[k?(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),k?"Exporting...":"Export ".concat(v.length," Reports")]})}),(0,r.jsxs)(b.SQ,{align:"end",className:"bg-slate-800 border-white/10",children:[(0,r.jsxs)(b._2,{onClick:()=>{y("pdf"),_()},disabled:k||0===v.length,className:"cursor-pointer",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export as PDF"]}),(0,r.jsxs)(b._2,{onClick:()=>{y("csv"),_()},disabled:k||0===v.length,className:"cursor-pointer",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,r.jsxs)(b._2,{onClick:()=>{y("zip"),_()},disabled:k||0===v.length,className:"cursor-pointer",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Export as ZIP (PDF + CSV)"]})]})]})})]}),k&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-300",children:"Exporting reports..."}),(0,r.jsxs)("span",{className:"text-white",children:[C,"%"]})]}),(0,r.jsx)(o.k,{value:C,className:"h-2"})]}),A&&(0,r.jsxs)(f.Fc,{variant:"destructive",className:"bg-red-900/20 border-red-900/50",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),(0,r.jsx)(f.XL,{children:"Export failed"}),(0,r.jsx)(f.TN,{children:A})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-white font-semibold",children:"Select Reports"}),(0,r.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{v.length===s.length?N([]):N(s.map(e=>e.id))},className:"border-white/20 text-white",children:v.length===s.length?"Deselect All":"Select All"})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.map(e=>(0,r.jsx)("div",{className:"neomorphism p-3 rounded-lg cursor-pointer transition-all ".concat(v.includes(e.id)?"ring-2 ring-blue-500/50":""),onClick:()=>D(e.id),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(c.S,{checked:v.includes(e.id),onChange:()=>D(e.id)}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 text-blue-400"}),(0,r.jsx)("span",{className:"text-white font-medium",children:e.website}),(0,r.jsx)(n.E,{className:I(e.status),children:e.status})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-white font-semibold",children:e.score}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.date})]})]})})]})},e.id))})]}),v.length>0&&(0,r.jsxs)("div",{className:"neomorphism p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-white font-semibold mb-2",children:"Export Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400",children:"Selected Reports"}),(0,r.jsx)("div",{className:"text-white font-semibold",children:v.length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400",children:"Export Format"}),(0,r.jsx)("div",{className:"text-white font-semibold",children:w.toUpperCase()})]})]})]})]})]})}},49026:(e,s,t)=>{t.d(s,{Fc:()=>d,TN:()=>o,XL:()=>n});var r=t(95155),a=t(12115),l=t(74466),i=t(53999);let c=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,...l}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(c({variant:a}),t),...l})});d.displayName="Alert";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});n.displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...a})});o.displayName="AlertDescription"},95139:(e,s,t)=>{t.d(s,{S:()=>d});var r=t(95155),a=t(12115),l=t(76981),i=t(5196),c=t(53999);let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,c.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,r.jsx)(l.C1,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName}}]);