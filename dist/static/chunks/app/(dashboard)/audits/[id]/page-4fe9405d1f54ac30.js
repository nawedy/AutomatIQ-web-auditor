(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8191],{5599:(e,s,t)=>{Promise.resolve().then(t.bind(t,58636)),Promise.resolve().then(t.bind(t,51847)),Promise.resolve().then(t.bind(t,63535)),Promise.resolve().then(t.bind(t,44521)),Promise.resolve().then(t.bind(t,84025)),Promise.resolve().then(t.bind(t,99021)),Promise.resolve().then(t.bind(t,76037)),Promise.resolve().then(t.bind(t,34964))},51847:(e,s,t)=>{"use strict";t.d(s,{AuditPages:()=>p});var a=t(95155),r=t(12115),l=t(88482),i=t(88524),c=t(88145),o=t(89852),n=t(97168),d=t(47863),m=t(66474),x=t(47924),u=t(54861),h=t(1243),g=t(81284),b=t(43453),j=t(33786);function p(e){let{auditId:s,initialPages:t=[]}=e,[p,N]=(0,r.useState)(t),[f,w]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[C,A]=(0,r.useState)("score"),[S,T]=(0,r.useState)("desc");(0,r.useState)(()=>{0===t.length&&k()});let k=async()=>{v(!0);try{let e=await fetch("/api/audits/".concat(s,"/pages"));if(!e.ok)throw Error("Error ".concat(e.status,": ").concat(e.statusText));let t=await e.json();N(t)}catch(e){console.error("Failed to fetch pages:",e)}finally{v(!1)}},E=e=>{C===e?T("asc"===S?"desc":"asc"):(A(e),T("desc"))},P=p.filter(e=>e.url.toLowerCase().includes(f.toLowerCase())||e.title.toLowerCase().includes(f.toLowerCase())).sort((e,s)=>{let t=0;switch(C){case"url":t=e.url.localeCompare(s.url);break;case"title":t=e.title.localeCompare(s.title);break;case"score":t=e.score-s.score;break;case"issues":t=e.issueCount.critical+e.issueCount.major+e.issueCount.minor+e.issueCount.info-(s.issueCount.critical+s.issueCount.major+s.issueCount.minor+s.issueCount.info);break;default:t=0}return"asc"===S?t:-t}),R=e=>e>=90?"text-green-500":e>=70?"text-yellow-500":e>=50?"text-orange-500":"text-red-500",F=e=>C!==e?null:"asc"===S?(0,a.jsx)(d.A,{className:"w-4 h-4"}):(0,a.jsx)(m.A,{className:"w-4 h-4"});return(0,a.jsxs)(l.Zp,{className:"glass-card border-white/10",children:[(0,a.jsx)(l.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsx)(l.ZB,{className:"text-lg font-medium text-white",children:"Audited Pages"}),(0,a.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(o.p,{placeholder:"Search pages...",className:"pl-10 bg-black/20 border-white/10 text-white",value:f,onChange:e=>w(e.target.value)})]})]})}),(0,a.jsx)(l.Wu,{children:y?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{className:"border-white/10 hover:bg-white/5",children:[(0,a.jsx)(i.nd,{className:"text-gray-400 cursor-pointer",onClick:()=>E("url"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["URL ",F("url")]})}),(0,a.jsx)(i.nd,{className:"text-gray-400 cursor-pointer",onClick:()=>E("title"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["Title ",F("title")]})}),(0,a.jsx)(i.nd,{className:"text-gray-400 cursor-pointer",onClick:()=>E("score"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["Score ",F("score")]})}),(0,a.jsx)(i.nd,{className:"text-gray-400 cursor-pointer",onClick:()=>E("issues"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["Issues ",F("issues")]})}),(0,a.jsx)(i.nd,{className:"text-gray-400 text-right",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:0===P.length?(0,a.jsx)(i.Hj,{className:"border-white/10",children:(0,a.jsx)(i.nA,{colSpan:5,className:"text-center py-8 text-gray-400",children:"No pages found matching your search"})}):P.map(e=>(0,a.jsxs)(i.Hj,{className:"border-white/10 hover:bg-white/5",children:[(0,a.jsx)(i.nA,{className:"font-medium text-white",children:(0,a.jsx)("div",{className:"truncate max-w-[200px]",title:e.url,children:e.url})}),(0,a.jsx)(i.nA,{className:"text-gray-300",children:(0,a.jsx)("div",{className:"truncate max-w-[200px]",title:e.title,children:e.title})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)("span",{className:"font-medium ".concat(R(e.score)),children:e.score})}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[e.issueCount.critical>0&&(0,a.jsxs)(c.E,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:[(0,a.jsx)(u.A,{className:"w-3 h-3 mr-1"}),e.issueCount.critical]}),e.issueCount.major>0&&(0,a.jsxs)(c.E,{className:"bg-orange-500/20 text-orange-400 border-orange-500/30",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 mr-1"}),e.issueCount.major]}),e.issueCount.minor>0&&(0,a.jsxs)(c.E,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 mr-1"}),e.issueCount.minor]}),e.issueCount.info>0&&(0,a.jsxs)(c.E,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:[(0,a.jsx)(g.A,{className:"w-3 h-3 mr-1"}),e.issueCount.info]}),0===e.issueCount.critical&&0===e.issueCount.major&&0===e.issueCount.minor&&0===e.issueCount.info&&(0,a.jsxs)(c.E,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:[(0,a.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"0"]})]})}),(0,a.jsx)(i.nA,{className:"text-right",children:(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-300 hover:text-white",asChild:!0,children:(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open page"}),(0,a.jsx)(j.A,{className:"h-4 w-4"})]})})})]},e.id))})]})})})]})}},58636:(e,s,t)=>{"use strict";t.d(s,{AuditOverview:()=>u});var a=t(95155),r=t(88482),l=t(41397),i=t(88145),c=t(43453),o=t(14186),n=t(54861),d=t(1243),m=t(81284),x=t(72713);function u(e){let{audit:s}=e,t=e=>e>=90?"text-green-500":e>=70?"text-yellow-500":e>=50?"text-orange-500":"text-red-500",u=e=>e>=90?"bg-green-500":e>=70?"bg-yellow-500":e>=50?"bg-orange-500":"bg-red-500";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.Zp,{className:"glass-card border-white/10",children:[(0,a.jsx)(r.aR,{className:"pb-2",children:(0,a.jsx)(r.ZB,{className:"text-lg font-medium text-white",children:"Overall Audit Score"})}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold tracking-tight",children:[(0,a.jsx)("span",{className:t(s.score),children:s.score}),(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"/100"})]}),(0,a.jsxs)(i.E,{variant:"outline",className:"".concat("completed"===s.status?"bg-green-500/20 text-green-400 border-green-500/30":"bg-blue-500/20 text-blue-400 border-blue-500/30"),children:["completed"===s.status?(0,a.jsx)(c.A,{className:"w-3 h-3 mr-1"}):(0,a.jsx)(o.A,{className:"w-3 h-3 mr-1"}),"completed"===s.status?"Completed":"In Progress"]})]}),(0,a.jsx)(l.k,{value:s.score,className:"h-2 ".concat(u(s.score))}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Last updated: ",(e=>{let s=new Date(e);return s.toLocaleDateString()+" "+s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})(s.completedAt)]})]})]}),(0,a.jsxs)(r.Zp,{className:"glass-card border-white/10",children:[(0,a.jsx)(r.aR,{className:"pb-2",children:(0,a.jsx)(r.ZB,{className:"text-lg font-medium text-white",children:"Issues Summary"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-black/20",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 text-red-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"Critical"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-red-500",children:s.issues.critical})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-black/20",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-orange-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"Major"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-orange-500",children:s.issues.major})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-black/20",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-yellow-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"Minor"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-yellow-500",children:s.issues.minor})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-black/20",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"Info"})]}),(0,a.jsx)("span",{className:"text-xl font-bold text-blue-500",children:s.issues.info})]})]})})]}),(0,a.jsxs)(r.Zp,{className:"glass-card border-white/10",children:[(0,a.jsx)(r.aR,{className:"pb-2",children:(0,a.jsx)(r.ZB,{className:"text-lg font-medium text-white",children:"Category Scores"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:s.categories.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(t(e.score)),children:[e.score,"/100"]}),(0,a.jsxs)(i.E,{variant:"outline",className:"bg-gray-500/20 text-gray-400 border-gray-500/30",children:[e.issueCount," issues"]})]})]}),(0,a.jsx)(l.k,{value:e.score,className:"h-1.5 ".concat(u(e.score))})]},s))})})]})]})}},63535:(e,s,t)=>{"use strict";t.d(s,{AuditRecommendations:()=>p});var a=t(95155),r=t(12115),l=t(88482),i=t(88145),c=t(97168),o=t(34964),n=t(54861),d=t(1243),m=t(81284),x=t(43453),u=t(14186),h=t(1482),g=t(71539),b=t(70333),j=t(92138);function p(e){let{auditId:s,initialRecommendations:t=[]}=e,[p,N]=(0,r.useState)(t),[f,w]=(0,r.useState)("all"),[y,v]=(0,r.useState)(!1);(0,r.useState)(()=>{0===t.length&&C()});let C=async()=>{v(!0);try{let e=await fetch("/api/audits/".concat(s,"/recommendations"));if(!e.ok)throw Error("Error ".concat(e.status,": ").concat(e.statusText));let t=await e.json();N(t)}catch(e){console.error("Failed to fetch recommendations:",e)}finally{v(!1)}},A=p.filter(e=>"all"===f||e.priority===f),S=e=>{switch(e){case"critical":return{color:"bg-red-500/20 text-red-400 border-red-500/30",icon:(0,a.jsx)(n.A,{className:"w-3 h-3 mr-1"})};case"high":return{color:"bg-orange-500/20 text-orange-400 border-orange-500/30",icon:(0,a.jsx)(d.A,{className:"w-3 h-3 mr-1"})};case"medium":return{color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",icon:(0,a.jsx)(d.A,{className:"w-3 h-3 mr-1"})};case"low":return{color:"bg-blue-500/20 text-blue-400 border-blue-500/30",icon:(0,a.jsx)(m.A,{className:"w-3 h-3 mr-1"})};default:return{color:"bg-gray-500/20 text-gray-400 border-gray-500/30",icon:(0,a.jsx)(m.A,{className:"w-3 h-3 mr-1"})}}},T=e=>{switch(e){case"low":return{color:"bg-green-500/20 text-green-400 border-green-500/30",text:"Quick Win"};case"medium":return{color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",text:"Medium Effort"};case"high":return{color:"bg-orange-500/20 text-orange-400 border-orange-500/30",text:"Major Project"};default:return{color:"bg-gray-500/20 text-gray-400 border-gray-500/30",text:"Unknown Effort"}}};return(0,a.jsxs)(l.Zp,{className:"glass-card border-white/10",children:[(0,a.jsx)(l.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsx)(l.ZB,{className:"text-lg font-medium text-white",children:"Recommendations"}),(0,a.jsx)(o.Tabs,{value:f,onValueChange:w,className:"w-full md:w-auto",children:(0,a.jsxs)(o.TabsList,{className:"bg-black/20",children:[(0,a.jsx)(o.TabsTrigger,{value:"all",className:"data-[state=active]:bg-primary",children:"All"}),(0,a.jsx)(o.TabsTrigger,{value:"critical",className:"data-[state=active]:bg-red-500/30",children:"Critical"}),(0,a.jsx)(o.TabsTrigger,{value:"high",className:"data-[state=active]:bg-orange-500/30",children:"High"}),(0,a.jsx)(o.TabsTrigger,{value:"medium",className:"data-[state=active]:bg-yellow-500/30",children:"Medium"}),(0,a.jsx)(o.TabsTrigger,{value:"low",className:"data-[state=active]:bg-blue-500/30",children:"Low"})]})})]})}),(0,a.jsx)(l.Wu,{children:y?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):(0,a.jsx)("div",{className:"space-y-4",children:0===A.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,a.jsx)(x.A,{className:"w-12 h-12 mx-auto mb-4 text-green-500 opacity-50"}),(0,a.jsx)("p",{className:"text-lg",children:"No recommendations in this category"}),(0,a.jsx)("p",{className:"text-sm",children:"Great job! Your website is performing well in this area."})]}):A.map(e=>{let s=S(e.priority),t=T(e.effort);return(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-black/20 border border-white/10 hover:border-white/20 transition-colors",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(i.E,{className:s.color,children:[s.icon,e.priority.charAt(0).toUpperCase()+e.priority.slice(1)," Priority"]}),(0,a.jsxs)(i.E,{className:t.color,children:[(0,a.jsx)(u.A,{className:"w-3 h-3 mr-1"}),t.text]}),(0,a.jsxs)(i.E,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 mr-1"}),e.category]})]})]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-400",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-1 text-yellow-500"}),(0,a.jsx)("span",{children:"Impact: "}),(0,a.jsx)("span",{className:"ml-1 text-white",children:e.impact})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-400",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-1 text-blue-500"}),(0,a.jsx)("span",{children:"Affects: "}),(0,a.jsxs)("span",{className:"ml-1 text-white",children:[e.pageCount," pages"]})]})]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"border-white/10 hover:bg-white/10",children:["View Details",(0,a.jsx)(j.A,{className:"w-4 h-4 ml-1"})]})]})]},e.id)})})})]})}},88524:(e,s,t)=>{"use strict";t.d(s,{A0:()=>c,BF:()=>o,Hj:()=>n,XI:()=>i,nA:()=>m,nd:()=>d,r6:()=>x});var a=t(95155),r=t(12115),l=t(53999);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})});i.displayName="Table";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...r})});c.displayName="TableHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})});o.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});n.displayName="TableRow";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});d.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...r})});x.displayName="TableCaption"},99021:(e,s,t)=>{"use strict";t.d(s,{ExportAuditButton:()=>p});var a=t(95155),r=t(12115),l=t(51154),i=t(91788),c=t(57434),o=t(64261),n=t(97168),d=t(67133),m=t(14503),x=t(26597);t(76118);var u=t(26696),h=t(67426);async function g(e){let s=new x.uE({orientation:"portrait",unit:"mm",format:"a4"}),t=s.internal.pageSize.getWidth();s.setFontSize(20),s.setTextColor(33,33,33),s.text("Website Audit Report",t/2,20,{align:"center"}),s.setFontSize(14),s.text(e.websiteName,t/2,30,{align:"center"}),s.setFontSize(10),s.setTextColor(100,100,100),s.text(e.websiteUrl,t/2,35,{align:"center"});let a=(0,h.GP)(new Date(e.createdAt),"MMMM d, yyyy");if(s.setFontSize(10),s.setTextColor(33,33,33),s.text("Generated on: ".concat(a),14,45),void 0!==e.overallScore){let a=e.overallScore>=90?[0,128,0]:e.overallScore>=70?[255,165,0]:[255,0,0];s.setTextColor(...a),s.text("Overall Score: ".concat(e.overallScore),t-14,45,{align:"right"})}s.setFontSize(14),s.setTextColor(33,33,33),s.text("Summary",14,55),s.setDrawColor(200,200,200),s.line(14,57,t-14,57);let r=e.categories.map(e=>[e.name,void 0!==e.score?e.score.toString():"N/A",e.issues.length.toString()]);s.autoTable({startY:60,head:[["Category","Score","Issues"]],body:r,headStyles:{fillColor:[41,65,148],textColor:[255,255,255],fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},columnStyles:{1:{halign:"center"},2:{halign:"center"}},margin:{top:60,right:14,bottom:20,left:14}});let l=s.lastAutoTable.finalY+15;for(let a of(l>s.internal.pageSize.getHeight()-40&&(s.addPage(),l=20),s.setFontSize(14),s.text("Issues by Category",14,l),s.line(14,l+2,t-14,l+2),l+=10,e.categories))if(l>s.internal.pageSize.getHeight()-40&&(s.addPage(),l=20),s.setFontSize(12),s.setTextColor(41,65,148),s.text("".concat(a.name).concat(void 0!==a.score?" - Score: ".concat(a.score):""),14,l),l+=5,a.issues.length>0){let e=a.issues.map(e=>[e.title,e.severity,e.description,e.recommendation||"N/A"]);s.autoTable({startY:l,head:[["Issue","Severity","Description","Recommendation"]],body:e,headStyles:{fillColor:[230,230,230],textColor:[33,33,33],fontStyle:"bold"},bodyStyles:{fontSize:8},columnStyles:{0:{cellWidth:40},1:{cellWidth:20},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{top:l,right:14,bottom:20,left:14}}),l=s.lastAutoTable.finalY+15}else s.setFontSize(10),s.setTextColor(100,100,100),s.text("No issues found",14,l),l+=10;let i=s.internal.getNumberOfPages();for(let e=1;e<=i;e++)s.setPage(e),s.setFontSize(8),s.setTextColor(150,150,150),s.text("Page ".concat(e," of ").concat(i," | AutomatIQ Website Auditor"),t/2,s.internal.pageSize.getHeight()-10,{align:"center"});return s.output("blob")}async function b(e){let s=e.categories.flatMap(s=>s.issues.map(t=>({websiteName:e.websiteName,websiteUrl:e.websiteUrl,auditDate:(0,h.GP)(new Date(e.createdAt),"yyyy-MM-dd"),overallScore:e.overallScore||"N/A",category:s.name,categoryScore:s.score||"N/A",issueTitle:t.title,issueSeverity:t.severity,issueDescription:t.description,issueImpact:t.impact,recommendation:t.recommendation||""})));return 0===s.length&&s.push({websiteName:e.websiteName,websiteUrl:e.websiteUrl,auditDate:(0,h.GP)(new Date(e.createdAt),"yyyy-MM-dd"),overallScore:e.overallScore||"N/A",category:"N/A",categoryScore:"N/A",issueTitle:"No issues found",issueSeverity:"N/A",issueDescription:"No issues found",issueImpact:"N/A",recommendation:""}),new u.iX({fields:["websiteName","websiteUrl","auditDate","overallScore","category","categoryScore","issueTitle","issueSeverity","issueDescription","issueImpact","recommendation"]}).parse(s)}async function j(e){let s=await fetch("/api/audits/".concat(e,"/export"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch audit data for export");return s.json()}function p(e){let{auditId:s,websiteName:t,className:x,variant:u="outline",size:h="default"}=e,[p,N]=(0,r.useState)(null),{toast:f}=(0,m.dj)(),w=async()=>{try{N("pdf");let e=await j(s),a=await g(e),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download="".concat(t.replace(/\s+/g,"-").toLowerCase(),"-audit-report.pdf"),document.body.appendChild(l),l.click(),document.body.removeChild(l),f({title:"Export successful",description:"Your audit report has been exported as PDF",variant:"default"})}catch(e){console.error("Error exporting PDF:",e),f({title:"Export failed",description:e.message||"Failed to export audit report",variant:"destructive"})}finally{N(null)}},y=async()=>{try{N("csv");let e=await j(s),a=await b(e),r=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),i=document.createElement("a");i.href=l,i.download="".concat(t.replace(/\s+/g,"-").toLowerCase(),"-audit-report.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i),f({title:"Export successful",description:"Your audit report has been exported as CSV",variant:"default"})}catch(e){console.error("Error exporting CSV:",e),f({title:"Export failed",description:e.message||"Failed to export audit report",variant:"destructive"})}finally{N(null)}};return(0,a.jsxs)(d.rI,{children:[(0,a.jsx)(d.ty,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:u,size:h,className:x,disabled:!!p,children:[p?(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,a.jsxs)(d.SQ,{align:"end",children:[(0,a.jsxs)(d._2,{onClick:w,disabled:"pdf"===p,className:"cursor-pointer",children:["pdf"===p?(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Export as PDF"]}),(0,a.jsxs)(d._2,{onClick:y,disabled:"csv"===p,className:"cursor-pointer",children:["csv"===p?(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Export as CSV"]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3930,4277,617,5093,4502,9855,9632,7445,6433,6784,9601,4521,8441,1684,7358],()=>s(5599)),_N_E=e.O()}]);